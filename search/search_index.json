{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Docker System Mastery: \u4ece\u539f\u7406\u5230\u751f\u4ea7\u7684\u5168\u80fd\u6307\u5357","text":"<p>The Ultimate Systemized Guide to Docker</p> <p>\u4e00\u5957\u6781\u5176\u8be6\u5c3d\u3001\u5177\u5907\u4e13\u4e1a\u6df1\u5ea6\u4e14\u6613\u4e8e\u90e8\u7f72\u7684 Docker \u7cfb\u7edf\u5316\u6559\u7a0b\u3002\u4e0d\u4ec5\u6db5\u76d6\u64cd\u4f5c\uff0c\u66f4\u900f\u5f7b\u8bb2\u89e3\u5e95\u5c42\u903b\u8f91\u3002</p>"},{"location":"#introduction","title":"\ud83d\udcd6 \u9879\u76ee\u7b80\u4ecb (Introduction)","text":"<p>\u672c\u6559\u7a0b\u65e8\u5728\u89e3\u51b3\u201c\u53ea\u77e5\u5176\u7136\uff0c\u4e0d\u77e5\u5176\u6240\u4ee5\u7136\u201d\u7684\u5b66\u4e60\u75db\u70b9\u3002\u6211\u4eec\u5c06\u4ece Docker \u7684\u5e95\u5c42\u8bbe\u8ba1\u54f2\u5b66\u51fa\u53d1\uff0c\u901a\u8fc7\u663e\u5fae\u955c\u5f0f\u7684\u8bed\u8a00\u62c6\u89e3\uff0c\u914d\u5408\u751f\u4ea7\u7ea7\u7684\u5b9e\u6218\u6d41\u7a0b\uff0c\u5e26\u4f60\u5b8c\u6210\u4ece\u521d\u5b66\u8005\u5230\u5bb9\u5668\u67b6\u6784\u5e08\u7684\u8715\u53d8\u3002</p>"},{"location":"#_1","title":"\u6838\u5fc3\u7279\u8272","text":"<ul> <li>\u6df1\u5ea6\u4f18\u5148\uff1a\u4e0d\u6ee1\u8db3\u4e8e <code>run</code> \u8d77\u6765\uff0c\u66f4\u5173\u6ce8 Namespace\u3001Cgroups\u3001UnionFS \u80cc\u540e\u7684\u539f\u7406\u3002</li> <li>\u9897\u7c92\u5ea6\u8fd8\u539f\uff1a\u5bf9\u6bcf\u4e00\u4e2a\u547d\u4ee4\u53c2\u6570\uff08\u5982 <code>-it</code>, <code>-v</code>, <code>--net</code>\uff09\u8fdb\u884c 1:1 \u7684\u672f\u8bed\u62c6\u89e3\u3002</li> <li>\u751f\u4ea7\u5bfc\u5411\uff1a\u6452\u5f03 Toy Demo\uff0c\u6240\u6709\u6848\u4f8b\u5747\u57fa\u4e8e\u751f\u4ea7\u73af\u5883\u7684\u6700\u4f73\u5b9e\u8df5\uff08Best Practices\uff09\u3002</li> <li>\u907f\u5751\u6307\u5357\uff1a\u57fa\u4e8e\u771f\u5b9e\u6545\u969c\u573a\u666f\u7684 Troubleshooting \u624b\u518c\u3002</li> </ul>"},{"location":"#navigation","title":"\ud83d\uddfa\ufe0f \u5bfc\u822a (Navigation)","text":""},{"location":"#01-philosophy-core","title":"01. \u6838\u5fc3\u54f2\u5b66\u4e0e\u6982\u5ff5 (Philosophy &amp; Core)","text":"<ul> <li>01_Introduction.md - \u5bb9\u5668\u5316\u8d77\u6e90\u4e0e\u6838\u5fc3\u601d\u60f3\uff1a\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981 Docker\uff1f\u5b83\u89e3\u51b3\u4e86\u4ec0\u4e48\u6839\u672c\u95ee\u9898\uff1f</li> </ul>"},{"location":"#02-foundation-setup","title":"02. \u57fa\u7840\u4e0e\u73af\u5883 (Foundation &amp; Setup)","text":"<ul> <li>02_Installation.md - \u591a\u5e73\u53f0\u5b89\u88c5\u4e0e\u67b6\u6784\u89e3\u6790\uff1aDocker Engine \u7684\u7ec4\u6210\u4e0e\u5b89\u88c5\uff0cClient-Server \u67b6\u6784\u8be6\u89e3\u3002</li> <li>03_CLI_Basics.md - \u547d\u4ee4\u884c\u57fa\u7840\u4e0e\u53c2\u6570\u663e\u5fae\u955c\uff1a(\u5f85\u66f4\u65b0)</li> </ul>"},{"location":"#03-workflow-lifecycle","title":"03. \u6807\u51c6\u5316\u5de5\u4f5c\u6d41 (Workflow &amp; Lifecycle)","text":"<ul> <li>04_Container_Life.md - \u5bb9\u5668\u751f\u547d\u5468\u671f\u4e0e\u72b6\u6001\u6d41\u8f6c\uff1a(\u5f85\u66f4\u65b0)</li> </ul>"},{"location":"#04-image-engineering","title":"04. \u955c\u50cf\u5de5\u7a0b (Image Engineering)","text":"<ul> <li>05_Dockerfile.md - Dockerfile \u6df1\u5ea6\u5256\u6790\u4e0e\u5206\u5c42\u539f\u7406\uff1a(\u5f85\u66f4\u65b0)</li> </ul>"},{"location":"#05-architecture-deep-dive","title":"05. \u67b6\u6784\u6df1\u6f5c (Architecture Deep Dive)","text":"<ul> <li>06_Networking.md - \u7f51\u7edc\u6a21\u578b\u8be6\u89e3\uff1a(\u5f85\u66f4\u65b0)</li> <li>07_Storage.md - \u5b58\u50a8\u4e0e\u6570\u636e\u6301\u4e45\u5316\uff1a(\u5f85\u66f4\u65b0)</li> </ul>"},{"location":"#06-orchestration","title":"06. \u7f16\u6392\u4e0e\u534f\u540c (Orchestration)","text":"<ul> <li>08_Compose.md - Docker Compose \u5b9e\u6218\u4e0e\u903b\u8f91\uff1a(\u5f85\u66f4\u65b0)</li> </ul>"},{"location":"#07-production-debug","title":"07. \u751f\u4ea7\u4e0e\u6392\u9519 (Production &amp; Debug)","text":"<ul> <li>09_Optimization.md - \u955c\u50cf\u7626\u8eab\u4e0e\u5b89\u5168\u52a0\u56fa\uff1a(\u5f85\u66f4\u65b0)</li> <li>10_Troubleshooting.md - \u907f\u5751\u6307\u5357\u4e0e\u9519\u8bef\u5b57\u5178\uff1a(\u5f85\u66f4\u65b0)</li> </ul>"},{"location":"#quick-start","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb (Quick Start)","text":"<p>\u5982\u679c\u4f60\u5df2\u7ecf\u5b89\u88c5\u4e86 Docker\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u9a8c\u8bc1\u73af\u5883\u5e76\u611f\u53d7\u672c\u6559\u7a0b\u7684\u98ce\u683c\uff1a</p> <pre><code># \u8fd0\u884c\u4e00\u4e2a\u4e34\u65f6\u7684 Nginx \u5bb9\u5668\ndocker run --rm -d -p 8080:80 --name guide-demo nginx:alpine\n</code></pre> <p>\u547d\u4ee4\u62c6\u89e3 (Linguistic Breakdown): *   <code>docker</code>: \u5ba2\u6237\u7aef CLI \u5de5\u5177\u3002 *   <code>run</code>: \u521b\u5efa\u5e76\u542f\u52a8\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\u3002 *   <code>--rm</code>: (Remove) \u5bb9\u5668\u505c\u6b62\u540e\u81ea\u52a8\u5220\u9664\u6587\u4ef6\u7cfb\u7edf\uff0c\u4fdd\u6301\u73af\u5883\u6574\u6d01\u3002 *   <code>-d</code>: (Detached) \u540e\u53f0\u8fd0\u884c\u6a21\u5f0f\uff0c\u4e0d\u5360\u7528\u5f53\u524d\u7ec8\u7aef\u3002 *   <code>-p 8080:80</code>: (Publish) \u7aef\u53e3\u6620\u5c04\u3002\u5c06\u5bbf\u4e3b\u673a\u7684 <code>8080</code> \u7aef\u53e3\u6d41\u91cf\u8f6c\u53d1\u5230\u5bb9\u5668\u5185\u90e8\u7684 <code>80</code> \u7aef\u53e3\u3002 *   <code>--name guide-demo</code>: \u7ed9\u5bb9\u5668\u8d77\u4e2a\u53ef\u8bfb\u7684\u540d\u5b57\uff0c\u4fbf\u4e8e\u540e\u7eed\u7ba1\u7406\u3002 *   <code>nginx:alpine</code>: \u955c\u50cf\u540d:\u6807\u7b7e\u3002<code>alpine</code> \u4ee3\u8868\u4f7f\u7528\u57fa\u4e8e Alpine Linux \u7684\u8d85\u5c0f\u4f53\u79ef\u7248\u672c\u3002</p> <p>\u00a9 2024 Docker System Mastery Project. Released under MIT License.</p>"},{"location":"01_Philosophy_and_Core/01_Introduction/","title":"01. \u5bb9\u5668\u5316\u8d77\u6e90\u4e0e\u6838\u5fc3\u601d\u60f3 (Introduction)","text":""},{"location":"01_Philosophy_and_Core/01_Introduction/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>\u5728\u6df1\u5165 Docker \u547d\u4ee4\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3\u5b83\u8bde\u751f\u7684\u80cc\u666f\u3002\u5728\u201c\u524d\u5bb9\u5668\u65f6\u4ee3\u201d\uff0c\u8f6f\u4ef6\u4ea4\u4ed8\u9762\u4e34\u7740\u8457\u540d\u7684 \"It works on my machine\" (\u5728\u6211\u7684\u673a\u5668\u4e0a\u6ca1\u95ee\u9898) \u7684\u56f0\u5883\u3002</p>"},{"location":"01_Philosophy_and_Core/01_Introduction/#environment-drift","title":"\u75db\u70b9\uff1a\u73af\u5883\u6f02\u79fb (Environment Drift)","text":"<p>\u5f00\u53d1\u73af\u5883\u3001\u6d4b\u8bd5\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u7684\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u4f9d\u8d56\u5e93\u7248\u672c\u3001\u914d\u7f6e\u6587\u4ef6\u5f80\u5f80\u5b58\u5728\u5fae\u5c0f\u5dee\u5f02\u3002\u8fd9\u4e9b\u5dee\u5f02\u5982\u540c\u8774\u8776\u6548\u5e94\uff0c\u5bfc\u81f4\u4ee3\u7801\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u5d29\u6e83\u3002</p>"},{"location":"01_Philosophy_and_Core/01_Introduction/#the-shipping-container-metaphor","title":"\u89e3\u51b3\u65b9\u6848\uff1a\u96c6\u88c5\u7bb1\u9690\u55bb (The Shipping Container Metaphor)","text":"<p>Docker \u7684 Logo \u662f\u4e00\u53ea\u9a6e\u7740\u96c6\u88c5\u7bb1\u7684\u9cb8\u9c7c\u3002\u8fd9\u6b63\u662f\u5176\u6838\u5fc3\u6982\u5ff5\u7684\u76f4\u89c2\u4f53\u73b0\uff1a *   \u8d27\u7269 (Code &amp; Deps): \u65e0\u8bba\u662f Java \u4ee3\u7801\u3001Python \u811a\u672c\u8fd8\u662f MySQL \u6570\u636e\u5e93\u3002 *   \u96c6\u88c5\u7bb1 (Container): \u4e00\u4e2a\u6807\u51c6\u5316\u7684\u5c01\u88c5\u5355\u5143\u3002\u5b83\u5c06\u4ee3\u7801\u53ca\u5176\u6240\u6709\u4f9d\u8d56\uff08\u5e93\u3001\u8fd0\u884c\u65f6\u3001\u914d\u7f6e\u3001OS\u6587\u4ef6\uff09\u6253\u5305\u5728\u4e00\u8d77\u3002 *   \u7801\u5934/\u8239 (OS/Infrastructure): \u65e0\u8bba\u5e95\u5c42\u662f AWS\u3001\u963f\u91cc\u4e91\uff0c\u8fd8\u662f\u4f60\u7684\u7b14\u8bb0\u672c\uff0c\u53ea\u8981\u6709 Docker \u5f15\u64ce\uff08\u7801\u5934\u5de5\u4eba\uff09\uff0c\u96c6\u88c5\u7bb1\u5c31\u80fd\u539f\u6837\u8fd0\u884c\u3002</p> <p>\u6838\u5fc3\u5b9a\u4e49: Docker \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5e94\u7528\u5bb9\u5668\u5f15\u64ce\uff0c\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u6253\u5305\u4ed6\u4eec\u7684\u5e94\u7528\u4ee5\u53ca\u4f9d\u8d56\u5305\u5230\u4e00\u4e2a\u53ef\u79fb\u690d\u7684\u5bb9\u5668\u4e2d\uff0c\u7136\u540e\u53d1\u5e03\u5230\u4efb\u4f55\u6d41\u884c\u7684 Linux \u673a\u5668\u6216 Windows \u673a\u5668\u4e0a\u3002</p>"},{"location":"01_Philosophy_and_Core/01_Introduction/#2-philosophy","title":"2. \u5e95\u5c42\u601d\u60f3 (Philosophy)","text":"<p>Docker \u7684\u8bbe\u8ba1\u54f2\u5b66\u5efa\u7acb\u5728\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u652f\u67f1\u4e4b\u4e0a\uff1a</p>"},{"location":"01_Philosophy_and_Core/01_Introduction/#a-immutable-infrastructure","title":"A. \u4e0d\u53ef\u53d8\u57fa\u7840\u8bbe\u65bd (Immutable Infrastructure)","text":"<p>\u4e00\u65e6\u955c\u50cf (Image) \u88ab\u6784\u5efa\uff0c\u5b83\u5c31\u662f\u53ea\u8bfb\u7684\u3002\u4f60\u4e0d\u4f1a\u201c\u4fee\u8865\u201d\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\uff08\u4f8b\u5982 SSH \u8fdb\u53bb\u5347\u7ea7\u8f6f\u4ef6\uff09\uff0c\u800c\u662f\u4fee\u6539 Dockerfile\uff0c\u91cd\u65b0\u6784\u5efa\u955c\u50cf\uff0c\u5e76\u66ff\u6362\u65e7\u5bb9\u5668\u3002\u8fd9\u786e\u4fdd\u4e86\u90e8\u7f72\u7684\u4e00\u81f4\u6027\u548c\u53ef\u56de\u6eda\u6027\u3002</p>"},{"location":"01_Philosophy_and_Core/01_Introduction/#b-process-isolation","title":"B. \u8fdb\u7a0b\u7ea7\u9694\u79bb (Process Isolation)","text":"<p>\u865a\u62df\u673a (VM) \u6a21\u62df\u6574\u4e2a\u786c\u4ef6\u5e76\u8fd0\u884c\u5b8c\u6574\u7684\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\uff0c\u6c89\u91cd\u4e14\u542f\u52a8\u6162\u3002 Docker \u5bb9\u5668\u5171\u4eab\u5bbf\u4e3b\u673a\u7684\u5185\u6838\uff0c\u4f46\u901a\u8fc7 Linux \u5185\u6838\u7279\u6027\u5b9e\u73b0\u9694\u79bb\u3002\u5bb9\u5668\u672c\u8d28\u4e0a\u53ea\u662f\u5bbf\u4e3b\u673a\u4e0a\u7684\u4e00\u4e2a\u88ab\u9694\u79bb\u7684\u8fdb\u7a0b\u3002</p> <p><code>[Image of VM vs Container Architecture]</code></p>"},{"location":"01_Philosophy_and_Core/01_Introduction/#c-layered-file-system","title":"C. \u5206\u5c42\u5b58\u50a8 (Layered File System)","text":"<p>Docker \u955c\u50cf\u4e0d\u662f\u4e00\u4e2a\u5927\u6587\u4ef6\uff0c\u800c\u662f\u4e00\u7ec4\u53ea\u8bfb\u5c42\u7684\u53e0\u52a0\u3002 *   \u590d\u7528\u6027: \u591a\u4e2a\u955c\u50cf\u53ef\u4ee5\u5171\u4eab\u57fa\u7840\u5c42\uff08\u5982 Ubuntu Base Layer\uff09\u3002 *   \u5199\u65f6\u590d\u5236 (CoW): \u5f53\u5bb9\u5668\u9700\u8981\u4fee\u6539\u6587\u4ef6\u65f6\uff0c\u5b83\u4e0d\u4f1a\u4fee\u6539\u53ea\u8bfb\u5c42\uff0c\u800c\u662f\u5c06\u6587\u4ef6\u590d\u5236\u5230\u6700\u4e0a\u5c42\u7684\u201c\u8bfb\u5199\u5c42\u201d\u8fdb\u884c\u4fee\u6539\u3002</p>"},{"location":"01_Philosophy_and_Core/01_Introduction/#3-terminology-breakdown","title":"3. \u5173\u952e\u672f\u8bed\u62c6\u89e3 (Terminology Breakdown)","text":"\u672f\u8bed \u82f1\u6587\u5168\u79f0 \u89e3\u91ca \u6bd4\u55bb \u955c\u50cf Image \u5e94\u7528\u7a0b\u5e8f\u7684\u9759\u6001\u6253\u5305\u6587\u4ef6\uff0c\u5305\u542b\u4ee3\u7801\u3001\u8fd0\u884c\u65f6\u3001\u5e93\u3001\u73af\u5883\u53d8\u91cf\u548c\u914d\u7f6e\u6587\u4ef6\u3002\u53ea\u8bfb\u3002 \u7c7b\u7684\u5b9a\u4e49 (Class) / \u6e38\u620f\u5149\u76d8 \u5bb9\u5668 Container \u955c\u50cf\u7684\u8fd0\u884c\u5b9e\u4f8b\u3002\u5b83\u5728\u955c\u50cf\u4e4b\u4e0a\u589e\u52a0\u4e86\u4e00\u4e2a\u53ef\u5199\u7684\u5bb9\u5668\u5c42\u3002\u53ef\u8bfb\u5199\u3002 \u7c7b\u7684\u5bf9\u8c61 (Object) / \u6b63\u5728\u8fd0\u884c\u7684\u6e38\u620f\u5b58\u6863 \u4ed3\u5e93 Repository \u5b58\u653e\u955c\u50cf\u7684\u5730\u65b9\u3002 \u4ee3\u7801\u4ed3\u5e93 (GitHub) / \u5e94\u7528\u5546\u5e97 \u5f15\u64ce Engine \u5305\u542b\u5b88\u62a4\u8fdb\u7a0b (Daemon)\u3001REST API \u548c \u5ba2\u6237\u7aef (CLI) \u7684 C/S \u67b6\u6784\u7a0b\u5e8f\u3002 \u6e38\u620f\u673a\u4e3b\u673a"},{"location":"01_Philosophy_and_Core/01_Introduction/#4-workflow","title":"4. \u6807\u51c6\u5316\u6d41\u7a0b (Workflow)","text":"<p>\u4e00\u4e2a\u5178\u578b\u7684 Docker \u5de5\u4f5c\u6d41\u9075\u5faa Build - Ship - Run \u7684\u6a21\u5f0f\uff1a</p> <ol> <li>Build (\u6784\u5efa): \u7f16\u5199 <code>Dockerfile</code>\uff0c\u5b9a\u4e49\u5e94\u7528\u73af\u5883\u3002\u8fd0\u884c <code>docker build</code> \u751f\u6210\u955c\u50cf\u3002</li> <li>Ship (\u8fd0\u8f93): \u8fd0\u884c <code>docker push</code> \u5c06\u955c\u50cf\u63a8\u9001\u5230\u955c\u50cf\u4ed3\u5e93 (Registry)\u3002</li> <li>Run (\u8fd0\u884c): \u5728\u751f\u4ea7\u670d\u52a1\u5668\u4e0a\u8fd0\u884c <code>docker run</code>\uff0c\u62c9\u53d6\u955c\u50cf\u5e76\u542f\u52a8\u5bb9\u5668\u3002</li> </ol>"},{"location":"01_Philosophy_and_Core/01_Introduction/#5-troubleshooting","title":"5. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"01_Philosophy_and_Core/01_Introduction/#1","title":"\u8bef\u533a 1\uff1a\u5bb9\u5668\u662f\u8f7b\u91cf\u7ea7\u865a\u62df\u673a","text":"<ul> <li>\u73b0\u8c61: \u8bd5\u56fe\u5728\u5bb9\u5668\u91cc\u8fd0\u884c systemd\u3001SSH \u670d\u52a1\uff0c\u6216\u8005\u5728\u4e00\u4e2a\u5bb9\u5668\u91cc\u585e\u8fdb MySQL + PHP + Nginx\u3002</li> <li>\u7ea0\u6b63: \u4e00\u5bb9\u5668\u4e00\u8fdb\u7a0b (One process per container)\u3002\u5bb9\u5668\u7684\u8bbe\u8ba1\u521d\u8877\u662f\u8fd0\u884c\u5355\u4e00\u5e94\u7528\u8fdb\u7a0b\u3002\u867d\u7136\u53ef\u4ee5\u8fd0\u884c\u591a\u8fdb\u7a0b\uff0c\u4f46\u8fd9\u8fdd\u80cc\u4e86\u8bbe\u8ba1\u54f2\u5b66\uff0c\u4f1a\u5bfc\u81f4\u65e5\u5fd7\u7ba1\u7406\u548c\u6269\u7f29\u5bb9\u53d8\u5f97\u56f0\u96be\u3002</li> </ul>"},{"location":"01_Philosophy_and_Core/01_Introduction/#2","title":"\u8bef\u533a 2\uff1a\u6570\u636e\u5199\u5728\u5bb9\u5668\u91cc","text":"<ul> <li>\u73b0\u8c61: \u5220\u9664\u4e86\u5bb9\u5668\uff0c\u53d1\u73b0\u6570\u636e\u5e93\u91cc\u7684\u6570\u636e\u5168\u4e22\u4e86\u3002</li> <li>\u539f\u56e0: \u5bb9\u5668\u7684\u8bfb\u5199\u5c42\u662f\u4e34\u65f6\u7684\u3002\u5bb9\u5668\u88ab\u5220\u9664\u65f6\uff0c\u8bfb\u5199\u5c42\u4e5f\u4f1a\u88ab\u9500\u6bc1\u3002</li> <li>\u89e3\u51b3\u65b9\u6848: \u4f7f\u7528 Volumes (\u5377) \u6216 Bind Mounts (\u6302\u8f7d) \u5c06\u6570\u636e\u6301\u4e45\u5316\u5230\u5bbf\u4e3b\u673a\u3002</li> </ul>"},{"location":"01_Philosophy_and_Core/01_Introduction/#3","title":"\u8bef\u533a 3\uff1a\u955c\u50cf\u81c3\u80bf","text":"<ul> <li>\u73b0\u8c61: \u4e00\u4e2a\u7b80\u5355\u7684 Python \u811a\u672c\u955c\u50cf\u9ad8\u8fbe 1GB\u3002</li> <li>\u539f\u56e0: \u5305\u542b\u4e86\u4e0d\u5fc5\u8981\u7684\u6784\u5efa\u5de5\u5177\uff08GCC, Make\uff09\u3001\u7f13\u5b58\u6587\u4ef6\u6216\u4f7f\u7528\u4e86\u8fc7\u5927\u7684\u57fa\u7840\u955c\u50cf\uff08\u5982\u5b8c\u6574\u7684 Ubuntu\uff09\u3002</li> <li>\u89e3\u51b3\u65b9\u6848: \u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa (Multi-stage Builds) \u548c\u7cbe\u7b80\u57fa\u7840\u955c\u50cf (Alpine, Distroless)\u3002</li> </ul> <p>Next: 02_Installation.md</p>"},{"location":"02_Foundation_and_Setup/02_Installation/","title":"02. \u591a\u5e73\u53f0\u5b89\u88c5\u4e0e\u67b6\u6784\u89e3\u6790 (Installation &amp; Architecture)","text":""},{"location":"02_Foundation_and_Setup/02_Installation/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>\u5728\u5b89\u88c5 Docker \u4e4b\u524d\uff0c\u5fc5\u987b\u7406\u89e3\u5176 Client-Server (C/S) \u67b6\u6784\u3002\u5f53\u4f60\u6267\u884c <code>docker run</code> \u65f6\uff0c\u8fd9\u80cc\u540e\u7684\u94fe\u8def\u5e76\u975e\u4ec5\u5728\u672c\u5730\u53d1\u751f\u3002</p>"},{"location":"02_Foundation_and_Setup/02_Installation/#docker-engine","title":"Docker Engine \u67b6\u6784","text":"<p>Docker Engine \u662f\u4e00\u4e2a C/S \u67b6\u6784\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a 1.  Server (Daemon): <code>dockerd</code> \u5b88\u62a4\u8fdb\u7a0b\u3002\u5b83\u662f\u957f\u671f\u8fd0\u884c\u7684\u540e\u53f0\u8fdb\u7a0b\uff0c\u8d1f\u8d23\u521b\u5efa\u548c\u7ba1\u7406 Docker \u5bf9\u8c61\uff08\u955c\u50cf\u3001\u5bb9\u5668\u3001\u7f51\u7edc\u3001\u5377\uff09\u3002\u5b83\u662f\u5b9e\u9645\u5e72\u6d3b\u7684\u201c\u82e6\u529b\u201d\u3002 2.  REST API: \u5b88\u62a4\u8fdb\u7a0b\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u901a\u4fe1\u7684\u63a5\u53e3\u89c4\u8303\u3002 3.  Client (CLI): <code>docker</code> \u547d\u4ee4\u884c\u5de5\u5177\u3002\u8fd9\u662f\u7528\u6237\u4e0e Docker \u4ea4\u4e92\u7684\u4e3b\u8981\u65b9\u5f0f\u3002\u5b83\u901a\u8fc7 REST API \u5411\u5b88\u62a4\u8fdb\u7a0b\u53d1\u9001\u6307\u4ee4\u3002</p> <p><code>[Image of Docker Architecture: Client -&gt; REST API -&gt; Daemon]</code></p>"},{"location":"02_Foundation_and_Setup/02_Installation/#2-installation","title":"2. \u5b89\u88c5 (Installation)","text":"<p>\u6211\u4eec\u5c06\u91cd\u70b9\u4ecb\u7ecd\u5728 Linux (Ubuntu) \u548c MacOS \u4e0a\u7684\u751f\u4ea7\u7ea7/\u5f00\u53d1\u7ea7\u5b89\u88c5\u3002</p>"},{"location":"02_Foundation_and_Setup/02_Installation/#a-linux-ubuntu-","title":"A. Linux (Ubuntu) - \u751f\u4ea7\u73af\u5883\u9996\u9009","text":"<p>\u4e0d\u8981\u4f7f\u7528 <code>apt-get install docker.io</code> (\u8fd9\u662f\u65e7\u7248\u672c)\u3002\u5b98\u65b9\u63a8\u8350\u4ece Docker \u4ed3\u5e93\u5b89\u88c5\u3002</p>"},{"location":"02_Foundation_and_Setup/02_Installation/#workflow","title":"\u6807\u51c6\u5316\u6d41\u7a0b (Workflow)","text":"<ol> <li> <p>\u5378\u8f7d\u65e7\u7248\u672c (Clean up):     <pre><code>sudo apt-get remove docker docker-engine docker.io containerd runc\n</code></pre></p> <ul> <li>\u8bed\u8a00\u62c6\u89e3: <code>apt-get remove</code> \u79fb\u9664\u8f6f\u4ef6\u5305\uff1b\u5217\u51fa\u7684\u5305\u540d\u662f Docker \u5386\u53f2\u4e0a\u4e0d\u540c\u65f6\u671f\u7684\u540d\u79f0\u3002</li> </ul> </li> <li> <p>\u8bbe\u7f6e\u4ed3\u5e93 (Set up repository):     <pre><code># \u66f4\u65b0\u7d22\u5f15\u5e76\u5b89\u88c5\u4f9d\u8d56\nsudo apt-get update\nsudo apt-get install ca-certificates curl gnupg\n\n# \u6dfb\u52a0 Docker \u5b98\u65b9 GPG \u5bc6\u94a5 (\u7528\u4e8e\u9a8c\u8bc1\u5305\u7684\u5b8c\u6574\u6027)\nsudo install -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\n\n# \u5199\u5165\u8f6f\u4ef6\u6e90\u5217\u8868\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\") stable\" | \\\n  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n</code></pre></p> <ul> <li>\u8bed\u8a00\u62c6\u89e3: <code>curl -fsSL</code>: Fail silently (\u4e0d\u663e\u793a\u8fdb\u5ea6\u6761\u4f46\u663e\u793a\u9519\u8bef), Follow redirects (\u8ddf\u968f\u91cd\u5b9a\u5411)\u3002<code>tee</code>: \u8bfb\u53d6\u6807\u51c6\u8f93\u5165\u5e76\u5199\u5165\u6587\u4ef6\u3002</li> </ul> </li> <li> <p>\u5b89\u88c5 Docker Engine:     <pre><code>sudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n</code></pre></p> <ul> <li>\u672f\u8bed\u62c6\u89e3:<ul> <li><code>docker-ce</code>: Community Edition (\u793e\u533a\u7248) \u5b88\u62a4\u8fdb\u7a0b\u3002</li> <li><code>docker-ce-cli</code>: \u547d\u4ee4\u884c\u5ba2\u6237\u7aef\u3002</li> <li><code>containerd.io</code>: \u884c\u4e1a\u6807\u51c6\u7684\u5bb9\u5668\u8fd0\u884c\u65f6\uff08\u5b9e\u9645\u7ba1\u7406\u5bb9\u5668\u751f\u547d\u5468\u671f\u7684\u7ec4\u4ef6\uff0cDocker \u8c03\u7528\u5b83\uff09\u3002</li> <li><code>docker-compose-plugin</code>: V2 \u7248\u672c\u7684 Compose \u63d2\u4ef6 (\u63d0\u4f9b <code>docker compose</code> \u547d\u4ee4)\u3002</li> </ul> </li> </ul> </li> <li> <p>\u9a8c\u8bc1:     <pre><code>sudo docker run hello-world\n</code></pre></p> </li> </ol>"},{"location":"02_Foundation_and_Setup/02_Installation/#b-macos-","title":"B. MacOS - \u5f00\u53d1\u73af\u5883","text":"<p>\u63a8\u8350\u4f7f\u7528 Docker Desktop for Mac\u3002\u5b83\u5728 macOS \u4e0a\u8fd0\u884c\u4e00\u4e2a\u8f7b\u91cf\u7ea7 Linux \u865a\u62df\u673a\uff08\u56e0\u4e3a macOS \u5185\u6838\u672c\u8eab\u4e0d\u652f\u6301 Linux \u5bb9\u5668\u7279\u6027\uff09\uff0c\u5e76\u5728\u5176\u4e2d\u8fd0\u884c Docker Daemon\u3002</p> <ul> <li>\u4e0b\u8f7d: \u8bbf\u95ee Docker Hub \u4e0b\u8f7d <code>.dmg</code> \u6587\u4ef6\u5b89\u88c5\u3002</li> <li>\u6ce8\u610f: Docker Desktop \u662f\u6536\u8d39\u8f6f\u4ef6\uff08\u5bf9\u4e8e\u5927\u578b\u4f01\u4e1a\uff09\u3002\u5f00\u6e90\u66ff\u4ee3\u65b9\u6848\u63a8\u8350 OrbStack \u6216 Colima\u3002</li> </ul>"},{"location":"02_Foundation_and_Setup/02_Installation/#3-post-installation-steps","title":"3. \u6743\u9650\u7ba1\u7406 (Post-installation steps)","text":"<p>\u5728 Linux \u4e0a\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b <code>docker</code> \u547d\u4ee4\u9700\u8981 <code>sudo</code> \u6743\u9650\uff0c\u56e0\u4e3a\u5b88\u62a4\u8fdb\u7a0b\u4ee5 <code>root</code> \u8fd0\u884c\u3002\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\uff0c\u6211\u4eec\u901a\u5e38\u5c06\u7528\u6237\u52a0\u5165 <code>docker</code> \u7528\u6237\u7ec4\u3002</p> <p><pre><code>sudo usermod -aG docker $USER\nnewgrp docker\n</code></pre> *   \u8bed\u8a00\u62c6\u89e3:     *   <code>usermod</code>: User Modify (\u4fee\u6539\u7528\u6237\u5c5e\u6027)\u3002     *   <code>-aG</code>: Append to Group (\u8ffd\u52a0\u5230\u7ec4)\u3002     *   <code>docker</code>: \u7ec4\u540d\u3002     *   <code>$USER</code>: \u73af\u5883\u53d8\u91cf\uff0c\u4ee3\u8868\u5f53\u524d\u767b\u5f55\u7528\u6237\u540d\u3002     *   <code>newgrp</code>: \u5237\u65b0\u5f53\u524d shell \u7684\u7ec4 ID\uff0c\u4f7f\u5176\u7acb\u5373\u751f\u6548\u3002</p>"},{"location":"02_Foundation_and_Setup/02_Installation/#4-troubleshooting","title":"4. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"02_Foundation_and_Setup/02_Installation/#1-cannot-connect-to-the-docker-daemon-at-unixvarrundockersock-is-the-docker-daemon-running","title":"\u62a5\u9519 1: <code>Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</code>","text":"<ul> <li>\u539f\u56e0: Docker \u5b88\u62a4\u8fdb\u7a0b\u672a\u542f\u52a8\uff0c\u6216\u8005\u5f53\u524d\u7528\u6237\u6ca1\u6709\u6743\u9650\u8bbf\u95ee Docker \u7684 Unix Socket\u3002</li> <li>\u6392\u67e5:<ol> <li>\u68c0\u67e5\u670d\u52a1\u72b6\u6001: <code>sudo systemctl status docker</code></li> <li>\u5982\u679c\u670d\u52a1\u672a\u8fd0\u884c: <code>sudo systemctl start docker</code></li> <li>\u5982\u679c\u670d\u52a1\u8fd0\u884c\u4e2d\u4f46\u4ecd\u62a5\u9519: \u68c0\u67e5\u6743\u9650\uff08\u53c2\u8003\u7b2c 3 \u8282\u201c\u6743\u9650\u7ba1\u7406\u201d\uff09\uff0c\u6216\u5c1d\u8bd5\u52a0 <code>sudo</code> \u6267\u884c\u3002</li> </ol> </li> </ul>"},{"location":"02_Foundation_and_Setup/02_Installation/#2-warning-no-swap-limit-support","title":"\u62a5\u9519 2: <code>WARNING: No swap limit support</code>","text":"<ul> <li>\u539f\u56e0: Linux \u5185\u6838\u672a\u5f00\u542f cgroup \u7684\u5185\u5b58\u4ea4\u6362\u9650\u5236\u529f\u80fd\u3002</li> <li>\u5f71\u54cd: Docker \u65e0\u6cd5\u9650\u5236\u5bb9\u5668\u7684 Swap \u4f7f\u7528\uff0c\u53ef\u80fd\u5bfc\u81f4\u5bb9\u5668\u8017\u5c3d\u5bbf\u4e3b\u673a Swap\u3002</li> <li>\u89e3\u51b3: \u4fee\u6539 <code>/etc/default/grub</code>\uff0c\u5728 <code>GRUB_CMDLINE_LINUX</code> \u4e2d\u6dfb\u52a0 <code>cgroup_enable=memory swapaccount=1</code>\uff0c\u7136\u540e\u8fd0\u884c <code>sudo update-grub</code> \u5e76\u91cd\u542f\u3002</li> </ul>"},{"location":"02_Foundation_and_Setup/02_Installation/#3-timeout","title":"\u62a5\u9519 3: \u955c\u50cf\u62c9\u53d6\u6781\u6162 (Timeout)","text":"<ul> <li>\u539f\u56e0: Docker Hub \u670d\u52a1\u5668\u5728\u56fd\u5916\uff0c\u56fd\u5185\u8bbf\u95ee\u53d7\u9650\u3002</li> <li>\u89e3\u51b3: \u914d\u7f6e\u955c\u50cf\u52a0\u901f\u5668 (Registry Mirror)\u3002<ul> <li>\u7f16\u8f91 <code>/etc/docker/daemon.json</code>:     <pre><code>{\n  \"registry-mirrors\": [\n    \"https://docker.m.daocloud.io\",\n    \"https://mirror.ccs.tencentyun.com\"\n  ]\n}\n</code></pre></li> <li>\u91cd\u542f\u670d\u52a1: <code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart docker</code></li> </ul> </li> </ul> <p>Next: 03_CLI_Basics.md</p>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/","title":"03. \u547d\u4ee4\u884c\u57fa\u7840\u4e0e\u53c2\u6570\u663e\u5fae\u955c (CLI Basics)","text":""},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>Docker CLI (Command Line Interface) \u662f\u6211\u4eec\u4e0e Docker Daemon \u5bf9\u8bdd\u7684\u552f\u4e00\u7a97\u53e3\u3002\u5927\u591a\u6570\u521d\u5b66\u8005\u53ea\u4f1a\u6b7b\u8bb0\u786c\u80cc <code>docker run</code>\uff0c\u4f46\u5e76\u4e0d\u7406\u89e3\u547d\u4ee4\u80cc\u540e\u7684\u52a8\u8bcd-\u540d\u8bcd\u903b\u8f91\u3002</p> <p>Docker \u73b0\u4ee3\u547d\u4ee4\u9075\u5faa <code>docker &lt;management-command&gt; &lt;sub-command&gt;</code> \u7684\u8bed\u6cd5\u7ed3\u6784\uff08\u5982 <code>docker container run</code>\uff09\uff0c\u867d\u7136\u65e7\u7248\u8bed\u6cd5\uff08\u5982 <code>docker run</code>\uff09\u4f9d\u7136\u88ab\u652f\u6301\uff0c\u4f46\u7406\u89e3\u65b0\u7248\u8bed\u6cd5\u6709\u52a9\u4e8e\u7406\u89e3 Docker \u7684\u8d44\u6e90\u5206\u7c7b\u3002</p>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#2-linguistic-breakdown","title":"2. \u6838\u5fc3\u547d\u4ee4\u663e\u5fae\u955c (Linguistic Breakdown)","text":"<p>\u6211\u4eec\u5c06\u6700\u5e38\u7528\u7684\u547d\u4ee4\u8fdb\u884c\u62c6\u89e3\uff0c\u6df1\u5165\u7406\u89e3\u6bcf\u4e00\u4e2a\u53c2\u6570\u7684\u7269\u7406\u542b\u4e49\u3002</p>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#a-the-run-command","title":"A. \u542f\u52a8\u5bb9\u5668 (The \"Run\" Command)","text":"<pre><code>docker run -d --name web-server -p 8080:80 -v $(pwd)/html:/usr/share/nginx/html nginx:latest\n</code></pre> <ul> <li><code>docker</code>: \u8c03\u7528 Docker \u5ba2\u6237\u7aef\u3002</li> <li><code>run</code>: \u8fd9\u662f\u4e00\u4e2a\u7ec4\u5408\u547d\u4ee4\uff0c\u5b9e\u9645\u4e0a = <code>create</code> (\u521b\u5efa\u5bb9\u5668\u5c42) + <code>start</code> (\u542f\u52a8\u4e3b\u8fdb\u7a0b)\u3002</li> <li><code>-d</code> (<code>--detach</code>): \u5206\u79bb\u6a21\u5f0f\u3002\u8ba9\u5bb9\u5668\u5728\u540e\u53f0\u8fd0\u884c\u3002\u5982\u679c\u4e0d\u52a0\uff0c\u5bb9\u5668\u7684\u6807\u51c6\u8f93\u51fa (stdout) \u4f1a\u76f4\u63a5\u5360\u7528\u4f60\u7684\u7ec8\u7aef\uff0c\u4e00\u65e6\u4f60\u6309 Ctrl+C\uff0c\u5bb9\u5668\u901a\u5e38\u4e5f\u4f1a\u968f\u4e4b\u505c\u6b62\u3002</li> <li><code>--name web-server</code>: DNS \u53cb\u597d\u540d\u3002\u5982\u679c\u4e0d\u6307\u5b9a\uff0cDocker \u4f1a\u751f\u6210 <code>pedantic_blackwell</code> \u8fd9\u79cd\u968f\u673a\u540d\u5b57\u3002\u6307\u5b9a\u540d\u5b57\u5bf9\u4e8e\u540e\u7eed\u7ba1\u7406\uff08\u505c\u6b62\u3001\u91cd\u542f\u3001\u65e5\u5fd7\u67e5\u770b\uff09\u81f3\u5173\u91cd\u8981\u3002</li> <li><code>-p 8080:80</code> (<code>--publish</code>): \u7aef\u53e3\u6620\u5c04\u3002<ul> <li><code>8080</code>: Host Port (\u5bbf\u4e3b\u673a\u7aef\u53e3)\u3002\u5916\u90e8\u8bbf\u95ee\u5165\u53e3\u3002</li> <li><code>80</code>: Container Port (\u5bb9\u5668\u7aef\u53e3)\u3002\u5bb9\u5668\u5185\u90e8\u8fdb\u7a0b\u76d1\u542c\u7684\u7aef\u53e3\u3002</li> <li>\u539f\u7406: Docker \u542f\u52a8\u4e86\u4e00\u4e2a <code>docker-proxy</code> \u8fdb\u7a0b\u6216\u901a\u8fc7 iptables NAT \u89c4\u5219\uff0c\u5c06\u5bbf\u4e3b\u673a 8080 \u7684\u6d41\u91cf\u8f6c\u53d1\u5230\u5bb9\u5668 IP \u7684 80 \u7aef\u53e3\u3002</li> </ul> </li> <li><code>-v</code> (<code>--volume</code>): \u6302\u8f7d\u5377\u3002\u683c\u5f0f <code>\u5bbf\u4e3b\u673a\u8def\u5f84:\u5bb9\u5668\u8def\u5f84</code>\u3002<ul> <li><code>$(pwd)/html</code>: \u5f53\u524d\u76ee\u5f55\u4e0b\u7684 html \u6587\u4ef6\u5939\u3002</li> <li><code>/usr/share/nginx/html</code>: Nginx \u5bb9\u5668\u5185\u5b58\u653e\u7f51\u9875\u7684\u9ed8\u8ba4\u4f4d\u7f6e\u3002</li> <li>\u6548\u679c: \u6253\u901a\u4e86\u5bbf\u4e3b\u673a\u4e0e\u5bb9\u5668\u7684\u6587\u4ef6\u7cfb\u7edf\u5899\u3002\u4fee\u6539\u5bbf\u4e3b\u673a\u6587\u4ef6\uff0c\u5bb9\u5668\u5185\u7acb\u5373\u751f\u6548\u3002</li> </ul> </li> <li><code>nginx:latest</code>: \u955c\u50cf\u5b9a\u4f4d\u3002<ul> <li><code>nginx</code>: \u955c\u50cf\u4ed3\u5e93\u540d (Repository)\u3002</li> <li><code>latest</code>: \u6807\u7b7e (Tag)\u3002\u5982\u679c\u4e0d\u5199\uff0c\u9ed8\u8ba4\u4e3a <code>latest</code>\u3002\u751f\u4ea7\u73af\u5883\u4e25\u7981\u4f7f\u7528 <code>latest</code>\uff0c\u5fc5\u987b\u9501\u5b9a\u7248\u672c\u53f7\uff01</li> </ul> </li> </ul>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#b-exec-vs-attach","title":"B. \u8fdb\u5165\u5bb9\u5668 (Exec vs Attach)","text":"<p>\u8fd9\u662f\u521d\u5b66\u8005\u6700\u5bb9\u6613\u6df7\u6dc6\u7684\u4e00\u5bf9\u547d\u4ee4\u3002</p> <ol> <li> <p><code>docker exec -it &lt;container&gt; bash</code> (\u63a8\u8350)</p> <ul> <li><code>exec</code>: Execute\u3002\u5728\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u91cc\u542f\u52a8\u4e00\u4e2a\u65b0\u8fdb\u7a0b\u3002</li> <li><code>-i</code> (<code>--interactive</code>): \u4fdd\u6301\u6807\u51c6\u8f93\u5165 (Stdin) \u6253\u5f00\u3002\u8ba9\u4f60\u80fd\u8f93\u5165\u547d\u4ee4\u3002</li> <li><code>-t</code> (<code>--tty</code>): \u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef (Pseudo-TTY)\u3002\u8ba9\u4f60\u770b\u5230\u547d\u4ee4\u884c\u63d0\u793a\u7b26\uff0c\u5e76\u652f\u6301\u989c\u8272\u548c\u683c\u5f0f\u5316\u3002</li> <li><code>bash</code>: \u8981\u6267\u884c\u7684\u547d\u4ee4\u3002\u5982\u679c\u955c\u50cf\u91cc\u6ca1\u6709 bash\uff0c\u5c1d\u8bd5 <code>sh</code>\u3002</li> <li>\u539f\u7406: \u5c31\u50cf\u901a\u8fc7 SSH \u767b\u5f55\u5230\u4e86\u670d\u52a1\u5668\uff0c\u4f46\u5b9e\u9645\u4e0a\u53ea\u662f\u5728\u540c\u4e00\u4e2a Namespace \u4e0b\u8d77\u4e86\u4e00\u4e2a Shell \u8fdb\u7a0b\u3002</li> </ul> </li> <li> <p><code>docker attach &lt;container&gt;</code> (\u614e\u7528)</p> <ul> <li><code>attach</code>: \u9644\u7740\u3002\u5c06\u5f53\u524d\u7ec8\u7aef\u8fde\u63a5\u5230\u5bb9\u5668\u7684\u4e3b\u8fdb\u7a0b (PID 1) \u7684\u6807\u51c6\u8f93\u5165/\u8f93\u51fa/\u9519\u8bef\u3002</li> <li>\u98ce\u9669: \u5982\u679c\u4f60\u6309 Ctrl+C\uff0c\u4f60\u5b9e\u9645\u4e0a\u662f\u5411 PID 1 \u53d1\u9001\u4e86 SIGINT \u4fe1\u53f7\uff0c\u4f1a\u5bfc\u81f4\u5bb9\u5668\u4e3b\u8fdb\u7a0b\u9000\u51fa\uff0c\u5bb9\u5668\u4e5f\u5c31\u6302\u4e86\uff01</li> </ul> </li> </ol>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#c-stop-vs-kill","title":"C. \u505c\u6b62\u4e0e\u5220\u9664 (Stop vs Kill)","text":"<ol> <li> <p><code>docker stop &lt;container&gt;</code> (\u4f18\u96c5)</p> <ul> <li>\u53d1\u9001 <code>SIGTERM</code> \u4fe1\u53f7\u7ed9\u5bb9\u5668\u4e3b\u8fdb\u7a0b\u3002</li> <li>\u7ed9\u8fdb\u7a0b 10\u79d2 (\u9ed8\u8ba4) \u65f6\u95f4\u6765\u4fdd\u5b58\u72b6\u6001\u3001\u5904\u7406\u672a\u5b8c\u6210\u8bf7\u6c42\u3001\u5173\u95ed\u8fde\u63a5\u3002</li> <li>\u5982\u679c 10\u79d2\u540e\u672a\u9000\u51fa\uff0c\u518d\u53d1\u9001 <code>SIGKILL</code>\u3002</li> </ul> </li> <li> <p><code>docker kill &lt;container&gt;</code> (\u66b4\u529b)</p> <ul> <li>\u76f4\u63a5\u53d1\u9001 <code>SIGKILL</code> \u4fe1\u53f7\u3002</li> <li>\u8fdb\u7a0b\u7acb\u5373\u88ab\u5185\u6838\u7ec8\u6b62\uff0c\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u6216\u6587\u4ef6\u635f\u574f\u3002</li> </ul> </li> </ol>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#3-inspection","title":"3. \u4fe1\u606f\u68c0\u67e5 (Inspection)","text":"<p>\u5f53\u4f60\u9700\u8981\u67e5\u770b\u5bb9\u5668\u7684\u201c\u4f53\u68c0\u62a5\u544a\u201d\u65f6\uff1a</p> <p><pre><code>docker inspect &lt;container_id&gt;\n</code></pre> *   \u8fd4\u56de\u4e00\u4e2a\u5de8\u5927\u7684 JSON \u5bf9\u8c61\u3002\u5305\u542b IP \u5730\u5740\u3001\u6302\u8f7d\u8def\u5f84\u3001\u73af\u5883\u53d8\u91cf\u3001\u542f\u52a8\u547d\u4ee4\u7b49\u6240\u6709\u5143\u6570\u636e\u3002 *   \u9ad8\u9636\u7528\u6cd5: \u4f7f\u7528 <code>-f</code> (Format) \u914d\u5408 Go Template \u63d0\u53d6\u7279\u5b9a\u4fe1\u606f\u3002     *   \u83b7\u53d6 IP: <code>docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' &lt;container&gt;</code></p>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#4-troubleshooting","title":"4. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#1-docker-error-response-from-daemon-conflict-the-container-name-web-server-is-already-in-use","title":"\u62a5\u9519 1: <code>docker: Error response from daemon: Conflict. The container name \"/web-server\" is already in use</code>","text":"<ul> <li>\u539f\u56e0: \u8bd5\u56fe\u521b\u5efa\u4e00\u4e2a\u540d\u5b57\u53eb <code>web-server</code> \u7684\u5bb9\u5668\uff0c\u4f46\u8fd9\u4e2a\u540d\u5b57\u5df2\u7ecf\u88ab\u53e6\u4e00\u4e2a\u5bb9\u5668\uff08\u53ef\u80fd\u662f\u5df2\u505c\u6b62\u7684\uff09\u5360\u7528\u4e86\u3002</li> <li>\u89e3\u51b3:<ul> <li>\u5220\u9664\u65e7\u7684: <code>docker rm -f web-server</code></li> <li>\u6216\u8005\u7ed9\u65b0\u7684\u8d77\u4e2a\u522b\u540d\u3002</li> </ul> </li> </ul>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#2-exec-bash-executable-file-not-found-in-path","title":"\u62a5\u9519 2: <code>exec: \"bash\": executable file not found in $PATH</code>","text":"<ul> <li>\u539f\u56e0: \u8bd5\u56fe\u8fdb\u5165\u5bb9\u5668 (<code>docker exec -it ... bash</code>)\uff0c\u4f46\u8be5\u955c\u50cf\uff08\u901a\u5e38\u662f Alpine \u7248\uff09\u4e3a\u4e86\u7626\u8eab\uff0c\u6ca1\u6709\u5b89\u88c5 <code>bash</code>\u3002</li> <li>\u89e3\u51b3: \u5c1d\u8bd5\u4f7f\u7528 <code>sh</code>: <code>docker exec -it &lt;container&gt; sh</code>\u3002</li> </ul>"},{"location":"02_Foundation_and_Setup/03_CLI_Basics/#3-bind-for-00008080-failed-port-is-already-allocated","title":"\u62a5\u9519 3: \u7aef\u53e3\u51b2\u7a81 <code>Bind for 0.0.0.0:8080 failed: port is already allocated</code>","text":"<ul> <li>\u539f\u56e0: \u5bbf\u4e3b\u673a\u7684 8080 \u7aef\u53e3\u5df2\u7ecf\u88ab\u5176\u4ed6\u8fdb\u7a0b\uff08\u6216\u5176\u4ed6\u5bb9\u5668\uff09\u5360\u7528\u4e86\u3002</li> <li>\u6392\u67e5: <code>lsof -i :8080</code> \u67e5\u770b\u8c01\u5728\u7528\u3002</li> <li>\u89e3\u51b3: \u4fee\u6539 <code>-p</code> \u53c2\u6570\uff0c\u6620\u5c04\u5230\u5176\u4ed6\u7aef\u53e3\uff0c\u5982 <code>-p 8081:80</code>\u3002</li> </ul> <p>Next: 04_Container_Life.md</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/","title":"04. \u5bb9\u5668\u751f\u547d\u5468\u671f\u4e0e\u72b6\u6001\u6d41\u8f6c (Container Lifecycle)","text":""},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>\u5bb9\u5668\u4e0d\u4ec5\u4ec5\u662f\u201c\u8fd0\u884c\u201d\u6216\u201c\u505c\u6b62\u201d\u90a3\u4e48\u7b80\u5355\u3002\u5b83\u62e5\u6709\u4e00\u4e2a\u5b8c\u6574\u7684\u751f\u547d\u5468\u671f\u72b6\u6001\u673a\u3002\u7406\u89e3\u8fd9\u4e2a\u72b6\u6001\u673a\uff0c\u662f\u7f16\u5199\u53ef\u9760\u7684\u7f16\u6392\u811a\u672c\uff08\u5982 Docker Compose, Kubernetes\uff09\u7684\u57fa\u7840\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#state-machine","title":"\u6838\u5fc3\u72b6\u6001\u673a (State Machine)","text":"<p><code>[Image of Container Lifecycle: Created -&gt; Running -&gt; Paused/Exited -&gt; Dead]</code></p> <ol> <li>Created (\u5df2\u521b\u5efa): \u5bb9\u5668\u5c42\u5df2\u5206\u914d\uff0c\u5143\u6570\u636e\u5df2\u751f\u6210\uff0c\u4f46\u4e3b\u8fdb\u7a0b\u5c1a\u672a\u542f\u52a8\u3002</li> <li>Running (\u8fd0\u884c\u4e2d): \u4e3b\u8fdb\u7a0b (PID 1) \u6b63\u5728\u8fd0\u884c\u3002</li> <li>Paused (\u5df2\u6682\u505c): \u6240\u6709\u8fdb\u7a0b\u88ab <code>cgroup</code> \u51bb\u7ed3 (frozen)\uff0cCPU \u5360\u7528\u964d\u4e3a 0\uff0c\u4f46\u5185\u5b58\u4ecd\u4fdd\u7559\u3002</li> <li>Exited (\u5df2\u9000\u51fa): \u4e3b\u8fdb\u7a0b\u7ed3\u675f\u3002\u5bb9\u5668\u6587\u4ef6\u7cfb\u7edf\u4fdd\u7559\uff0c\u53ef\u4ee5\u67e5\u770b\u65e5\u5fd7\uff0c\u4f46\u4e0d\u518d\u6d88\u8017 CPU/\u5185\u5b58\u3002</li> <li>Dead/Removal (\u6b7b\u4ea1/\u79fb\u9664): \u5f7b\u5e95\u4ece Docker \u5f15\u64ce\u4e2d\u79fb\u9664\u3002</li> </ol>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#2-workflow","title":"2. \u72b6\u6001\u6d41\u8f6c\u5b9e\u64cd (Workflow)","text":"<p>\u6211\u4eec\u5c06\u6f14\u793a\u4e00\u4e2a\u5bb9\u5668\u4ece\u51fa\u751f\u5230\u6b7b\u4ea1\u7684\u5b8c\u6574\u65c5\u7a0b\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#step-1-create","title":"Step 1: Create (\u53ea\u751f\u4e0d\u517b)","text":"<p><pre><code>docker create --name life-demo nginx:alpine\n</code></pre> *   \u72b6\u6001: Created *   \u89e3\u91ca: \u6b64\u65f6\u5bb9\u5668\u5df2\u5b58\u5728\uff0c\u4f46\u672a\u542f\u52a8\u3002\u9002\u7528\u4e8e\u9700\u8981\u5148\u884c\u914d\u7f6e\u7f51\u7edc\u6216\u6302\u8f7d\u5377\uff0c\u7a0d\u540e\u518d\u542f\u52a8\u7684\u573a\u666f\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#step-2-start","title":"Step 2: Start (\u542f\u52a8)","text":"<p><pre><code>docker start life-demo\n</code></pre> *   \u72b6\u6001: Running *   \u89e3\u91ca: \u89e6\u53d1 PID 1 \u8fdb\u7a0b\u542f\u52a8\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#step-3-pauseunpause","title":"Step 3: Pause/Unpause (\u51b7\u51bb\u89e3\u51bb)","text":"<p><pre><code>docker pause life-demo\n# \u6b64\u65f6\u8bbf\u95ee Nginx \u4f1a\u65e0\u54cd\u5e94\uff0c\u4f46\u8fde\u63a5\u4e0d\u4f1a\u7acb\u5373\u65ad\u5f00\uff08\u76f4\u5230\u8d85\u65f6\uff09\ndocker unpause life-demo\n</code></pre> *   \u72b6\u6001: Running &lt;-&gt; Paused *   \u539f\u7406: \u5229\u7528 Linux cgroup \u7684 <code>freezer</code> \u5b50\u7cfb\u7edf\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#step-4-stop","title":"Step 4: Stop (\u5bff\u7ec8\u6b63\u5bdd)","text":"<p><pre><code>docker stop life-demo\n</code></pre> *   \u72b6\u6001: Exited (0) *   \u89e3\u91ca: \u6b63\u5e38\u9000\u51fa\u3002\u4f7f\u7528 <code>docker ps -a</code> \u53ef\u4ee5\u770b\u5230\u5b83\uff0c\u72b6\u6001\u680f\u663e\u793a <code>Exited (0) ...</code>\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#step-5-restart","title":"Step 5: Restart (\u8d77\u6b7b\u56de\u751f)","text":"<p><pre><code>docker restart life-demo\n</code></pre> *   \u72b6\u6001: Running *   \u89e3\u91ca: \u5148 stop \u518d start\u3002\u539f\u6709\u7684\u6587\u4ef6\u7cfb\u7edf\u4fee\u6539\uff08\u5982\u65e5\u5fd7\u6587\u4ef6\uff09\u4f9d\u7136\u5b58\u5728\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#step-6-oom-kill","title":"Step 6: OOM Kill (\u975e\u6b63\u5e38\u6b7b\u4ea1)","text":"<p>\u5982\u679c\u5bb9\u5668\u5185\u5b58\u8d85\u9650\uff0c\u4f1a\u88ab\u5185\u6838 OOM Killer \u6740\u6389\u3002 *   \u72b6\u6001: Exited (137) *   \u89e3\u91ca: \u9000\u51fa\u7801 137 = 128 + 9 (SIGKILL)\u3002\u8fd9\u662f\u5178\u578b\u7684\u5185\u5b58\u6ea2\u51fa\u4fe1\u53f7\u3002</p>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#3-restart-policies","title":"3. \u81ea\u52a8\u91cd\u542f\u7b56\u7565 (Restart Policies)","text":"<p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u4e0d\u80fd\u624b\u52a8\u76ef\u7740\u5bb9\u5668\u53bb\u91cd\u542f\u3002Docker \u63d0\u4f9b\u4e86 <code>--restart</code> \u53c2\u6570\u6765\u81ea\u52a8\u7ba1\u7406\u751f\u547d\u5468\u671f\u3002</p> <pre><code>docker run -d --restart always nginx\n</code></pre> \u7b56\u7565 \u89e3\u91ca \u9002\u7528\u573a\u666f <code>no</code> \u9ed8\u8ba4\u503c\u3002\u6302\u4e86\u5c31\u6302\u4e86\uff0c\u4e0d\u91cd\u542f\u3002 \u4e00\u6b21\u6027\u4efb\u52a1 (Job) <code>on-failure[:max-retries]</code> \u53ea\u6709\u5f53\u9000\u51fa\u7801\u975e 0 (\u62a5\u9519\u9000\u51fa) \u65f6\u624d\u91cd\u542f\u3002\u53ef\u9650\u5236\u91cd\u8bd5\u6b21\u6570\u3002 \u4e5f\u662f Job\uff0c\u4f46\u5bb9\u5fcd\u5076\u5c14\u5931\u8d25 <code>always</code> \u65e0\u8bba\u5982\u4f55\u90fd\u91cd\u542f\u3002\u5373\u4f7f\u624b\u52a8 stop\uff0cDocker \u670d\u52a1\u91cd\u542f\u540e\u5b83\u4e5f\u4f1a\u81ea\u52a8\u62c9\u8d77\u3002 \u751f\u4ea7 Web \u670d\u52a1\u9996\u9009 <code>unless-stopped</code> \u7c7b\u4f3c always\uff0c\u4f46\u5982\u679c\u4f60\u624b\u52a8 stop \u4e86\u5b83\uff0cDocker \u91cd\u542f\u540e\u4e0d\u4f1a\u81ea\u52a8\u62c9\u8d77\u5b83\u3002 \u5f00\u53d1\u73af\u5883\u670d\u52a1"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#4-troubleshooting","title":"4. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#1-exited-immediately","title":"\u73b0\u8c61 1: \u5bb9\u5668\u4e00\u542f\u52a8\u5c31\u9000\u51fa (Exited immediately)","text":"<ul> <li>\u547d\u4ee4: <code>docker run -d ubuntu</code></li> <li>\u539f\u56e0: Docker \u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u7ed1\u5b9a\u5728 PID 1 (\u4e3b\u8fdb\u7a0b) \u4e0a\u3002<ul> <li><code>ubuntu</code> \u955c\u50cf\u9ed8\u8ba4\u547d\u4ee4\u662f <code>bash</code>\u3002</li> <li>\u5728 <code>-d</code> \u540e\u53f0\u6a21\u5f0f\u4e0b\uff0c<code>bash</code> \u6ca1\u6709\u8fde\u63a5\u7ec8\u7aef\uff0c\u53d1\u73b0\u65e0\u4e8b\u53ef\u505a\uff0c\u7acb\u5373\u9000\u51fa\u3002</li> <li>PID 1 \u9000\u51fa -&gt; \u5bb9\u5668\u9000\u51fa\u3002</li> </ul> </li> <li>\u89e3\u51b3:<ul> <li>\u5982\u679c\u662f\u670d\u52a1\u7c7b\u5bb9\u5668\uff0c\u786e\u4fdd\u524d\u53f0\u8fd0\u884c\uff08\u5982 <code>nginx -g \"daemon off;\"</code>\uff09\u3002</li> <li>\u5982\u679c\u662f\u6d4b\u8bd5\u5bb9\u5668\uff0c\u52a0 <code>-it</code> \u6216\u547d\u4ee4 <code>tail -f /dev/null</code> \u8ba9\u5b83\u5361\u4f4f\u3002</li> </ul> </li> </ul>"},{"location":"03_Workflow_and_Lifecycle/04_Container_Life/#2-docker-stop-10","title":"\u73b0\u8c61 2: <code>docker stop</code> \u6781\u6162 (\u5361\u4f4f 10 \u79d2)","text":"<ul> <li>\u539f\u56e0: \u5bb9\u5668\u5185\u7684\u4e3b\u8fdb\u7a0b\u5ffd\u7565\u4e86 <code>SIGTERM</code> \u4fe1\u53f7\u3002<ul> <li>\u901a\u5e38\u56e0\u4e3a PID 1 \u662f shell \u811a\u672c (<code>/bin/sh -c ...</code>)\uff0c\u800c shell \u4e0d\u4f1a\u8f6c\u53d1\u4fe1\u53f7\u7ed9\u5b50\u8fdb\u7a0b\u3002</li> </ul> </li> <li>\u89e3\u51b3:<ul> <li>\u5728 Dockerfile \u4e2d\u4f7f\u7528 <code>exec</code> \u542f\u52a8\u547d\u4ee4\u3002</li> <li>\u6216\u8005\u4f7f\u7528 <code>tini</code> \u4f5c\u4e3a init \u8fdb\u7a0b (<code>docker run --init ...</code>)\u3002</li> </ul> </li> </ul> <p>Next: 05_Dockerfile.md</p>"},{"location":"04_Image_Engineering/05_Dockerfile/","title":"05. Dockerfile \u6df1\u5ea6\u5256\u6790\u4e0e\u5206\u5c42\u539f\u7406 (Dockerfile Deep Dive)","text":""},{"location":"04_Image_Engineering/05_Dockerfile/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>Dockerfile \u662f\u6784\u5efa\u955c\u50cf\u7684\u201c\u56fe\u7eb8\u201d\u3002\u5b83\u662f\u4e00\u4e2a\u5305\u542b\u4e00\u7cfb\u5217\u6307\u4ee4\u7684\u6587\u672c\u6587\u4ef6\uff0cDocker \u5f15\u64ce\u6309\u987a\u5e8f\u8bfb\u53d6\u8fd9\u4e9b\u6307\u4ee4\uff0c\u4e00\u5c42\u5c42\u5730\u6784\u5efa\u51fa\u6700\u7ec8\u7684\u955c\u50cf\u3002</p>"},{"location":"04_Image_Engineering/05_Dockerfile/#layer-caching","title":"\u5206\u5c42\u539f\u7406 (Layer Caching)","text":"<p>\u8fd9\u662f Docker \u6784\u5efa\u901f\u5ea6\u5feb\u3001\u5b58\u50a8\u9ad8\u6548\u7684\u6838\u5fc3\u79d8\u5bc6\u3002 *   Dockerfile \u4e2d\u7684\u6bcf\u4e00\u884c\u6307\u4ee4\uff08<code>RUN</code>, <code>COPY</code>, <code>ADD</code>\uff09\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u955c\u50cf\u5c42 (Layer)\u3002 *   \u7f13\u5b58\u673a\u5236: \u5982\u679c\u4f60\u4fee\u6539\u4e86 Dockerfile \u7684\u7b2c 10 \u884c\uff0c\u90a3\u4e48\u524d 9 \u884c\u7684\u6784\u5efa\u7ed3\u679c\u4f1a\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u8bfb\u53d6\uff0c\u53ea\u6709\u7b2c 10 \u884c\u53ca\u4e4b\u540e\u7684\u6307\u4ee4\u4f1a\u91cd\u65b0\u6267\u884c\u3002</p>"},{"location":"04_Image_Engineering/05_Dockerfile/#2-instruction-breakdown","title":"2. \u6307\u4ee4\u663e\u5fae\u955c (Instruction Breakdown)","text":"<p>\u6211\u4eec\u5c06\u901a\u8fc7\u6784\u5efa\u4e00\u4e2a\u751f\u4ea7\u7ea7\u7684 Node.js \u5e94\u7528\u955c\u50cf\u6765\u5256\u6790\u5173\u952e\u6307\u4ee4\u3002</p> <pre><code># 1. FROM: \u57fa\u7840\u955c\u50cf\nFROM node:18-alpine\n\n# 2. WORKDIR: \u5de5\u4f5c\u76ee\u5f55\nWORKDIR /app\n\n# 3. COPY (\u4f9d\u8d56\u5148\u884c): \u5229\u7528\u7f13\u5b58\nCOPY package.json package-lock.json ./\n\n# 4. RUN: \u6267\u884c\u6784\u5efa\u547d\u4ee4\nRUN npm ci --only=production\n\n# 5. COPY (\u6e90\u7801): \u7ecf\u5e38\u53d8\u52a8\u7684\u90e8\u5206\u653e\u540e\u9762\nCOPY . .\n\n# 6. ENV: \u73af\u5883\u53d8\u91cf\nENV PORT=8080\n\n# 7. EXPOSE: \u7aef\u53e3\u58f0\u660e (\u4ec5\u4f5c\u4e3a\u6587\u6863)\nEXPOSE 8080\n\n# 8. CMD: \u542f\u52a8\u547d\u4ee4\nCMD [\"node\", \"src/index.js\"]\n</code></pre>"},{"location":"04_Image_Engineering/05_Dockerfile/#_1","title":"\u6df1\u5ea6\u89e3\u6790","text":"<ul> <li><code>FROM</code>: \u4e00\u5207\u7684\u8d77\u70b9\u3002\u63a8\u8350\u4f7f\u7528 <code>alpine</code> \u7248\u672c\uff08\u4f53\u79ef\u5c0f\uff0c\u5b89\u5168\u6027\u9ad8\uff09\u3002</li> <li><code>WORKDIR</code>: \u76f8\u5f53\u4e8e <code>mkdir + cd</code>\u3002\u540e\u7eed\u547d\u4ee4\u90fd\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6267\u884c\u3002\u4e0d\u8981\u7528 <code>RUN cd /app</code>\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u5c42\u7ea7\u4e0a\u4e0b\u6587\u6df7\u4e71\u3002</li> <li><code>COPY</code> vs <code>ADD</code>:<ul> <li><code>COPY</code>: \u4ec5\u4ec5\u662f\u590d\u5236\u672c\u5730\u6587\u4ef6\u3002\u63a8\u8350\u4f7f\u7528\u3002</li> <li><code>ADD</code>: \u9ad8\u7ea7\u7248\u590d\u5236\u3002\u652f\u6301\u81ea\u52a8\u89e3\u538b <code>.tar.gz</code>\uff0c\u652f\u6301\u4ece URL \u4e0b\u8f7d\u6587\u4ef6\u3002\u614e\u7528\uff0c\u9664\u975e\u4f60\u660e\u786e\u9700\u8981\u89e3\u538b\u529f\u80fd\u3002</li> </ul> </li> <li>\u7f13\u5b58\u4f18\u5316\u6280\u5de7 (The \"Dependency First\" Pattern):<ul> <li>\u4e3a\u4ec0\u4e48\u5148 <code>COPY package.json</code> \u7136\u540e <code>RUN npm install</code>\uff0c\u6700\u540e\u624d <code>COPY .</code>\uff1f</li> <li>\u539f\u7406: \u6e90\u4ee3\u7801 (<code>src/</code>) \u7ecf\u5e38\u53d8\uff0c\u4f46\u4f9d\u8d56 (<code>package.json</code>) \u4e0d\u5e38\u53d8\u3002</li> <li>\u5982\u679c\u628a <code>COPY .</code> \u653e\u5728\u6700\u524d\uff0c\u6bcf\u6b21\u6539\u4ee3\u7801\u90fd\u4f1a\u5bfc\u81f4\u7f13\u5b58\u5931\u6548\uff0c\u5bfc\u81f4 <code>npm install</code> \u91cd\u65b0\u8fd0\u884c\uff0c\u6d6a\u8d39\u5927\u91cf\u65f6\u95f4\u3002</li> </ul> </li> <li><code>RUN</code>: \u5728\u6784\u5efa\u65f6\u6267\u884c\u3002\u5e38\u7528\u4e8e\u5b89\u88c5\u8f6f\u4ef6\u3001\u7f16\u8bd1\u4ee3\u7801\u3002</li> <li><code>CMD</code> vs <code>ENTRYPOINT</code>:<ul> <li><code>CMD</code>: \u5bb9\u5668\u542f\u52a8\u65f6\u7684\u9ed8\u8ba4\u547d\u4ee4\u3002\u53ef\u4ee5\u88ab <code>docker run</code> \u540e\u7684\u53c2\u6570\u8986\u76d6\u3002<ul> <li><code>CMD [\"node\", \"app.js\"]</code> -&gt; <code>docker run my-img echo hello</code> -&gt; \u5b9e\u9645\u8fd0\u884c <code>echo hello</code>\u3002</li> </ul> </li> <li><code>ENTRYPOINT</code>: \u5bb9\u5668\u542f\u52a8\u65f6\u7684\u56fa\u5b9a\u5165\u53e3\u3002\u4e0d\u53ef\u88ab\u8986\u76d6\uff08\u9664\u975e\u7528 <code>--entrypoint</code>\uff09\u3002<code>docker run</code> \u540e\u7684\u53c2\u6570\u4f1a\u4f5c\u4e3a\u53c2\u6570\u4f20\u7ed9\u5b83\u3002<ul> <li>\u5e38\u7528\u4e8e\u5236\u4f5c\u547d\u4ee4\u884c\u5de5\u5177\u955c\u50cf\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"04_Image_Engineering/05_Dockerfile/#3-multi-stage-builds","title":"3. \u591a\u9636\u6bb5\u6784\u5efa (Multi-stage Builds)","text":"<p>\u8fd9\u662f\u955c\u50cf\u7626\u8eab\u7684\u7ec8\u6781\u6b66\u5668\u3002</p>"},{"location":"04_Image_Engineering/05_Dockerfile/#_2","title":"\u573a\u666f","text":"<p>Go/Java/C++ \u9700\u8981\u7f16\u8bd1\u3002\u7f16\u8bd1\u9700\u8981 GCC/JDK (\u51e0\u767eMB)\u3002\u8fd0\u884c\u53ea\u9700\u8981\u4e8c\u8fdb\u5236\u6587\u4ef6 (\u51e0MB)\u3002\u6211\u4eec\u4e0d\u5e0c\u671b\u628a GCC \u5e26\u5165\u751f\u4ea7\u955c\u50cf\u3002</p>"},{"location":"04_Image_Engineering/05_Dockerfile/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":"<pre><code># Stage 1: Build (\u7f16\u8bd1\u73af\u5883)\nFROM golang:1.21 AS builder\nWORKDIR /app\nCOPY . .\nRUN go build -o myapp main.go\n\n# Stage 2: Production (\u751f\u4ea7\u73af\u5883)\nFROM alpine:latest\nWORKDIR /root/\n# \u5173\u952e\uff1a\u53ea\u4ece builder \u9636\u6bb5\u590d\u5236\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\nCOPY --from=builder /app/myapp .\nCMD [\"./myapp\"]\n</code></pre> <ul> <li>\u7ed3\u679c: \u6700\u7ec8\u955c\u50cf\u4e0d\u5305\u542b Go \u7f16\u8bd1\u5668\uff0c\u53ea\u6709 Alpine \u7cfb\u7edf\u548c\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u4f53\u79ef\u53ef\u80fd\u53ea\u6709 10MB\u3002</li> </ul>"},{"location":"04_Image_Engineering/05_Dockerfile/#4-troubleshooting","title":"4. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"04_Image_Engineering/05_Dockerfile/#1-standard_init_linuxgo228-exec-user-process-caused-no-such-file-or-directory","title":"\u62a5\u9519 1: <code>standard_init_linux.go:228: exec user process caused: no such file or directory</code>","text":"<ul> <li>\u539f\u56e0: \u901a\u5e38\u53d1\u751f\u5728 Windows \u4e0b\u7f16\u5199 Shell \u811a\u672c\uff0c\u7136\u540e <code>COPY</code> \u8fdb Linux \u5bb9\u5668\u3002<ul> <li>Windows \u6362\u884c\u7b26\u662f <code>CRLF</code> (<code>\\r\\n</code>)\u3002</li> <li>Linux \u53ea\u80fd\u8bc6\u522b <code>LF</code> (<code>\\n</code>)\u3002</li> <li>\u5bfc\u81f4 Shebang <code>#!/bin/bash\\r</code> \u627e\u4e0d\u5230\u89e3\u91ca\u5668\u3002</li> </ul> </li> <li>\u89e3\u51b3: \u5728\u7f16\u8f91\u5668\u4e2d\u5c06\u6362\u884c\u7b26\u8bbe\u7f6e\u4e3a LF\uff0c\u6216\u4f7f\u7528 <code>dos2unix</code> \u8f6c\u6362\u3002</li> </ul>"},{"location":"04_Image_Engineering/05_Dockerfile/#2","title":"\u62a5\u9519 2: \u6784\u5efa\u7f13\u5b58\u5bfc\u81f4\u4ee3\u7801\u672a\u66f4\u65b0","text":"<ul> <li>\u73b0\u8c61: \u4fee\u6539\u4e86\u4ee3\u7801\uff0c\u91cd\u65b0 build\uff0c\u4f46\u8fd0\u884c\u7684\u8fd8\u662f\u65e7\u4ee3\u7801\u3002</li> <li>\u539f\u56e0: Docker \u8bef\u5224\u6587\u4ef6\u672a\u4fee\u6539\uff0c\u4f7f\u7528\u4e86\u7f13\u5b58\u5c42\u3002</li> <li>\u89e3\u51b3: <code>docker build --no-cache ...</code> \u5f3a\u5236\u4e0d\u4f7f\u7528\u7f13\u5b58\u3002</li> </ul>"},{"location":"04_Image_Engineering/05_Dockerfile/#3-run-export","title":"\u8bef\u533a 3: \u5728 <code>RUN</code> \u4e2d\u4f7f\u7528 <code>export</code> \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf","text":"<ul> <li>\u9519\u8bef\u5199\u6cd5: <code>RUN export MY_VAR=123</code></li> <li>\u540e\u679c: <code>export</code> \u53ea\u5728\u5f53\u524d <code>RUN</code> \u6307\u4ee4\u7684 shell \u8fdb\u7a0b\u4e2d\u6709\u6548\u3002\u4e0b\u4e00\u884c\u6307\u4ee4\uff08\u65b0\u7684\u5c42\uff09\u5c31\u6ca1\u4e86\u3002</li> <li>\u6b63\u786e\u505a\u6cd5: \u4f7f\u7528 <code>ENV MY_VAR=123</code> \u6307\u4ee4\uff0c\u5b83\u4f1a\u6301\u4e45\u5316\u5230\u955c\u50cf\u5143\u6570\u636e\u4e2d\u3002</li> </ul> <p>Next: 06_Networking.md</p>"},{"location":"05_Architecture_Deep_Dive/06_Networking/","title":"06. \u7f51\u7edc\u6a21\u578b\u8be6\u89e3 (Network Models)","text":""},{"location":"05_Architecture_Deep_Dive/06_Networking/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>\u7f51\u7edc\u662f Docker \u4e2d\u6700\u8ba9\u521d\u5b66\u8005\u5934\u75bc\u7684\u90e8\u5206\u3002\u5bb9\u5668\u4e4b\u95f4\u5982\u4f55\u901a\u4fe1\uff1f\u5bb9\u5668\u5982\u4f55\u88ab\u5916\u754c\u8bbf\u95ee\uff1f</p>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#cnm-container-network-model","title":"CNM (Container Network Model)","text":"<p>Docker \u9075\u5faa CNM \u6807\u51c6\uff0c\u5305\u542b\u4e09\u4e2a\u8981\u7d20\uff1a 1.  Sandbox (\u6c99\u76d2): \u5305\u542b\u5bb9\u5668\u7684\u7f51\u7edc\u6808\u914d\u7f6e\uff08Ethernet \u63a5\u53e3\u3001\u8def\u7531\u8868\u3001DNS\uff09\u3002 2.  Endpoint (\u7aef\u70b9): \u865a\u62df\u7f51\u7edc\u63a5\u53e3\uff0c\u7c7b\u4f3c\u4e8e\u7f51\u5361\u3002 3.  Network (\u7f51\u7edc): \u8f6f\u4ef6\u5b9a\u4e49\u7684\u7f51\u6865\uff0c\u7c7b\u4f3c\u4e8e\u4ea4\u6362\u673a\uff0c\u8fde\u63a5\u591a\u4e2a Endpoint\u3002</p>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#2-network-drivers","title":"2. \u4e09\u5927\u6838\u5fc3\u6a21\u5f0f (Network Drivers)","text":"<p><code>[Image of Network Drivers: Bridge vs Host vs None]</code></p>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#a-bridge-","title":"A. Bridge (\u7f51\u6865\u6a21\u5f0f - \u9ed8\u8ba4)","text":"<p>\u5f53\u4f60\u8fd0\u884c <code>docker run</code> \u4e0d\u52a0 <code>--net</code> \u53c2\u6570\u65f6\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6b64\u6a21\u5f0f\u3002</p> <ul> <li>\u539f\u7406: Docker \u5728\u5bbf\u4e3b\u673a\u4e0a\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u7f51\u6865 <code>docker0</code> (\u7c7b\u4f3c\u4e8e\u7269\u7406\u4ea4\u6362\u673a)\u3002\u6bcf\u4e2a\u5bb9\u5668\u5206\u914d\u4e00\u4e2a\u72ec\u7acb\u7684 IP (\u5982 <code>172.17.0.x</code>)\u3002\u5bb9\u5668\u901a\u8fc7 <code>veth pair</code> (\u865a\u62df\u7f51\u7ebf) \u8fde\u63a5\u5230 <code>docker0</code>\u3002</li> <li>\u9002\u7528\u573a\u666f: \u5355\u673a\u591a\u5bb9\u5668\u5e94\u7528\u3002</li> <li>\u901a\u4fe1\u65b9\u5f0f:<ul> <li>\u5bb9\u5668\u95f4: \u76f4\u63a5\u901a\u8fc7 IP \u901a\u4fe1\uff0c\u6216\u901a\u8fc7 <code>--name</code> \u89e3\u6790\uff08\u4ec5\u9650\u81ea\u5b9a\u4e49 Bridge\uff09\u3002</li> <li>\u5916\u90e8\u8bbf\u95ee: \u5fc5\u987b\u4f7f\u7528\u7aef\u53e3\u6620\u5c04 (<code>-p</code>)\u3002</li> </ul> </li> </ul>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#b-host","title":"B. Host (\u4e3b\u673a\u6a21\u5f0f)","text":"<p><pre><code>docker run --net=host ...\n</code></pre> *   \u539f\u7406: \u5bb9\u5668\u4e0d\u518d\u62e5\u6709\u72ec\u7acb\u7684 Network Namespace\u3002\u5b83\u76f4\u63a5\u5171\u4eab\u5bbf\u4e3b\u673a\u7684\u7f51\u7edc\u6808\u3002 *   \u7279\u70b9:     *   \u5bb9\u5668 IP = \u5bbf\u4e3b\u673a IP\u3002     *   \u65e0\u9700 <code>-p</code> \u6620\u5c04\u7aef\u53e3\u3002\u5bb9\u5668\u91cc\u76d1\u542c 80\uff0c\u5bbf\u4e3b\u673a 80 \u5c31\u88ab\u5360\u7528\u4e86\u3002     *   \u6027\u80fd\u6700\u9ad8\uff08\u6ca1\u6709 NAT \u635f\u8017\uff09\u3002 *   \u9002\u7528\u573a\u666f: \u5bf9\u7f51\u7edc\u6027\u80fd\u8981\u6c42\u6781\u9ad8\uff0c\u6216\u7aef\u53e3\u6570\u91cf\u5de8\u5927\u7684\u670d\u52a1\u3002</p>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#c-none","title":"C. None (\u65e0\u7f51\u7edc\u6a21\u5f0f)","text":"<p><pre><code>docker run --net=none ...\n</code></pre> *   \u539f\u7406: \u5bb9\u5668\u6709\u72ec\u7acb\u7684 Network Namespace\uff0c\u4f46\u6ca1\u6709\u4efb\u4f55\u7f51\u5361\uff08\u53ea\u6709 loopback\uff09\u3002 *   \u9002\u7528\u573a\u666f: \u6781\u5ea6\u5b89\u5168\u3001\u4e0d\u9700\u8981\u8054\u7f51\u7684\u6279\u5904\u7406\u4efb\u52a1\uff08\u5982\u751f\u6210\u5bc6\u94a5\u3001\u79bb\u7ebf\u8ba1\u7b97\uff09\u3002</p>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#3-inter-container-communication","title":"3. \u5bb9\u5668\u4e92\u8054\u5b9e\u64cd (Inter-container Communication)","text":""},{"location":"05_Architecture_Deep_Dive/06_Networking/#localhost","title":"\u4e3a\u4ec0\u4e48 <code>localhost</code> \u8fde\u4e0d\u4e0a\uff1f","text":"<p>\u5728\u5bb9\u5668 A (Node.js) \u4e2d\u5c1d\u8bd5\u8fde\u63a5 <code>localhost:3306</code> (MySQL)\uff0c\u901a\u5e38\u4f1a\u5931\u8d25\u3002 *   \u539f\u56e0: \u5bb9\u5668\u5185\u7684 <code>localhost</code> \u6307\u5411\u7684\u662f\u5bb9\u5668 A \u81ea\u8eab\uff0c\u800c\u4e0d\u662f\u5bbf\u4e3b\u673a\uff0c\u4e5f\u4e0d\u662f\u5bb9\u5668 B\u3002</p>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#user-defined-bridge","title":"\u89e3\u51b3\u65b9\u6848\uff1a\u81ea\u5b9a\u4e49\u7f51\u7edc (User-defined Bridge)","text":"<p>Docker \u81ea\u5e26\u7684\u9ed8\u8ba4 <code>bridge</code> \u7f51\u7edc\u4e0d\u652f\u6301 DNS \u81ea\u52a8\u89e3\u6790\u3002\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u7f51\u7edc\u3002</p> <pre><code># 1. \u521b\u5efa\u7f51\u7edc\ndocker network create my-net\n\n# 2. \u542f\u52a8 MySQL\uff0c\u52a0\u5165\u7f51\u7edc\uff0c\u5e76\u8d77\u540d\u4e3a 'db'\ndocker run -d --name db --net my-net -e MYSQL_ROOT_PASSWORD=secret mysql:5.7\n\n# 3. \u542f\u52a8 Web App\uff0c\u52a0\u5165\u540c\u4e00\u7f51\u7edc\n# \u6b64\u65f6\uff0c\u5728 Web App \u4ee3\u7801\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 'db' \u4f5c\u4e3a\u4e3b\u673a\u540d\u8fde\u63a5 MySQL\ndocker run -d --name web --net my-net my-web-app\n</code></pre> <ul> <li>Linguistic Breakdown:<ul> <li><code>--net my-net</code>: \u6307\u5b9a\u7f51\u7edc\u9a71\u52a8\u3002</li> <li>DNS Resolution: Docker \u5185\u90e8\u7ef4\u62a4\u4e86\u4e00\u4e2a DNS Server\u3002\u5f53 Web App \u8bf7\u6c42 <code>db</code> \u65f6\uff0cDocker \u4f1a\u81ea\u52a8\u89e3\u6790\u4e3a MySQL \u5bb9\u5668\u7684\u5185\u90e8 IP (\u5982 <code>172.18.0.2</code>)\u3002</li> </ul> </li> </ul>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#4-troubleshooting","title":"4. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"05_Architecture_Deep_Dive/06_Networking/#1-connection-refused","title":"\u62a5\u9519 1: <code>Connection refused</code>","text":"<ul> <li>\u573a\u666f: \u5bb9\u5668 A \u8fde\u5bb9\u5668 B\u3002</li> <li>\u6392\u67e5\u6b65\u9aa4:<ol> <li>\u786e\u8ba4\u5bb9\u5668 B \u662f\u5426\u5df2\u542f\u52a8 (<code>docker ps</code>)\u3002</li> <li>\u786e\u8ba4\u5bb9\u5668 B \u7684\u8fdb\u7a0b\u662f\u5426\u76d1\u542c\u4e86 <code>0.0.0.0</code> \u800c\u4e0d\u662f <code>127.0.0.1</code>\u3002<ul> <li>\u5982\u679c MySQL \u914d\u7f6e\u4e3a <code>bind-address = 127.0.0.1</code>\uff0c\u5b83\u53ea\u63a5\u53d7\u5bb9\u5668 B \u5185\u90e8\u7684\u8fde\u63a5\uff0c\u5916\u90e8\uff08\u5305\u62ec\u5bb9\u5668 A\uff09\u65e0\u6cd5\u8fde\u63a5\u3002</li> </ul> </li> <li>\u786e\u8ba4\u4e24\u4e2a\u5bb9\u5668\u662f\u5426\u5728\u540c\u4e00\u4e2a Network \u4e0b (<code>docker inspect</code>)\u3002</li> </ol> </li> </ul>"},{"location":"05_Architecture_Deep_Dive/06_Networking/#2-ip","title":"\u8bef\u533a 2: \u5728\u5bb9\u5668\u91cc\u586b\u5bbf\u4e3b\u673a IP","text":"<ul> <li>\u73b0\u8c61: \u4ee3\u7801\u91cc\u5199\u6b7b\u5bbf\u4e3b\u673a\u5c40\u57df\u7f51 IP (\u5982 <code>192.168.1.100</code>)\u3002</li> <li>\u95ee\u9898: <ul> <li>IP \u53ef\u80fd\u4f1a\u53d8\uff08DHCP\uff09\u3002</li> <li>\u5982\u679c\u5728\u4e91\u670d\u52a1\u5668\u4e0a\uff0c\u53ef\u80fd\u6d89\u53ca\u9632\u706b\u5899\u89c4\u5219\u3002</li> </ul> </li> <li>\u6b63\u786e\u505a\u6cd5: \u4f7f\u7528 <code>host.docker.internal</code> (Mac/Windows Docker Desktop \u7279\u6709) \u6216\u5728 Linux \u4f7f\u7528 <code>--add-host host.docker.internal:host-gateway</code>\u3002</li> </ul> <p>Next: 07_Storage.md</p>"},{"location":"05_Architecture_Deep_Dive/07_Storage/","title":"07. \u5b58\u50a8\u4e0e\u6570\u636e\u6301\u4e45\u5316 (Storage &amp; Persistence)","text":""},{"location":"05_Architecture_Deep_Dive/07_Storage/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>Docker \u5bb9\u5668\u7684\u8bbe\u8ba1\u539f\u5219\u662f \"Ephemeral\" (\u77ac\u65f6\u7684)\u3002\u5f53\u5bb9\u5668\u88ab\u5220\u9664 (<code>docker rm</code>)\uff0c\u5176\u5185\u90e8\u6587\u4ef6\u7cfb\u7edf\uff08\u8bfb\u5199\u5c42\uff09\u4e2d\u7684\u6240\u6709\u6570\u636e\u90fd\u4f1a\u6c38\u4e45\u4e22\u5931\u3002</p> <p>\u4e3a\u4e86\u4fdd\u5b58\u6570\u636e\u5e93\u6587\u4ef6\u3001\u65e5\u5fd7\u6216\u914d\u7f6e\u6587\u4ef6\uff0c\u6211\u4eec\u9700\u8981\u5c06\u6570\u636e\u201c\u5916\u5305\u201d\u7ed9\u5bbf\u4e3b\u673a\u3002</p>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#2-mount-types","title":"2. \u4e09\u5927\u6302\u8f7d\u65b9\u5f0f (Mount Types)","text":"<p><code>[Image of Mount Types: Volume vs Bind Mount vs tmpfs]</code></p>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#a-volumes-","title":"A. Volumes (\u5377 - \u63a8\u8350)","text":"<p>\u7531 Docker \u8fdb\u7a0b\u5168\u6743\u7ba1\u7406\uff0c\u5b58\u50a8\u5728\u5bbf\u4e3b\u673a\u7684\u7279\u5b9a\u533a\u57df\uff08Linux \u4e0b\u901a\u5e38\u662f <code>/var/lib/docker/volumes/</code>\uff09\u3002</p> <ul> <li>\u4f18\u70b9:<ul> <li>\u4e0e\u5bbf\u4e3b\u673a\u6587\u4ef6\u7cfb\u7edf\u89e3\u8026\uff08\u4f60\u4e0d\u9700\u8981\u5173\u5fc3\u5177\u4f53\u8def\u5f84\uff09\u3002</li> <li>\u6613\u4e8e\u5907\u4efd\u548c\u8fc1\u79fb\u3002</li> <li>\u8de8\u5e73\u53f0\u517c\u5bb9\u6027\u597d\u3002</li> </ul> </li> <li>\u8bed\u6cd5: <code>-v &lt;\u5377\u540d&gt;:&lt;\u5bb9\u5668\u8def\u5f84&gt;</code> <pre><code>docker run -v my-db-data:/var/lib/mysql mysql\n</code></pre></li> </ul>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#b-bind-mounts","title":"B. Bind Mounts (\u7ed1\u5b9a\u6302\u8f7d)","text":"<p>\u5c06\u5bbf\u4e3b\u673a\u7684\u4efb\u610f\u6587\u4ef6\u6216\u76ee\u5f55\u76f4\u63a5\u6620\u5c04\u5230\u5bb9\u5668\u4e2d\u3002</p> <ul> <li>\u4f18\u70b9: \u5f00\u53d1\u73af\u5883\u795e\u5668\u3002\u4fee\u6539\u5bbf\u4e3b\u673a\u4ee3\u7801\uff0c\u5bb9\u5668\u5185\u7acb\u5373\u751f\u6548\u3002</li> <li>\u7f3a\u70b9: \u4f9d\u8d56\u5bbf\u4e3b\u673a\u7279\u5b9a\u8def\u5f84\uff0c\u79fb\u690d\u6027\u5dee\u3002</li> <li>\u8bed\u6cd5: <code>-v &lt;\u5bbf\u4e3b\u673a\u7edd\u5bf9\u8def\u5f84&gt;:&lt;\u5bb9\u5668\u8def\u5f84&gt;</code> <pre><code>docker run -v $(pwd)/src:/app/src node\n</code></pre></li> </ul>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#c-tmpfs-mounts","title":"C. tmpfs Mounts (\u5185\u5b58\u6302\u8f7d)","text":"<p>\u6570\u636e\u4ec5\u5b58\u50a8\u5728\u5bbf\u4e3b\u673a\u7684\u5185\u5b58\u4e2d\uff0c\u4e0d\u5199\u5165\u78c1\u76d8\u3002</p> <ul> <li>\u573a\u666f: \u5b58\u50a8\u654f\u611f\u4fe1\u606f\uff08\u5bc6\u94a5\uff09\u6216\u8ffd\u6c42\u6781\u81f4\u8bfb\u5199\u901f\u5ea6\u7684\u4e34\u65f6\u7f13\u5b58\u3002</li> </ul>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#3-permissions-ownership","title":"3. \u6743\u9650\u4e0e\u6240\u6709\u6743 (Permissions &amp; Ownership)","text":"<p>\u8fd9\u662f\u5b58\u50a8\u6302\u8f7d\u4e2d\u6700\u4ee4\u4eba\u5934\u79c3\u7684\u95ee\u9898\u3002</p>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#_1","title":"\u573a\u666f","text":"<p>\u5bbf\u4e3b\u673a\u5f53\u524d\u7528\u6237\u662f <code>weiguang</code> (uid=1000)\uff0c\u5bb9\u5668\u5185\u8fd0\u884c\u7684\u662f <code>postgres</code> (uid=999)\u3002 \u5f53\u4f60\u628a\u5bbf\u4e3b\u673a\u76ee\u5f55\u6302\u8f7d\u8fdb\u53bb\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0 <code>Permission denied</code>\u3002</p>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#_2","title":"\u663e\u5fae\u955c\u5206\u6790","text":"<ul> <li>Linux \u6587\u4ef6\u6743\u9650\u673a\u5236: \u5185\u6838\u53ea\u8ba4 UID\uff0c\u4e0d\u8ba4\u7528\u6237\u540d\u3002</li> <li>\u5982\u679c\u5bbf\u4e3b\u673a\u6587\u4ef6\u5939\u6743\u9650\u662f <code>drwx------ weiguang:weiguang</code> (700)\uff0c\u5373\u53ea\u6709 UID 1000 \u80fd\u8bfb\u5199\u3002</li> <li>\u5bb9\u5668\u5185\u8fdb\u7a0b\u4ee5 UID 999 \u8fd0\u884c\uff0c\u8bd5\u56fe\u8bbf\u95ee\u8be5\u76ee\u5f55 -&gt; \u5185\u6838\u62d2\u7edd -&gt; \u5d29\u6e83\u3002</li> </ul>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":"<ol> <li>Chown (\u66b4\u529b\u6cd5): \u5728\u5bbf\u4e3b\u673a\u4e0a <code>sudo chown -R 999:999 data_dir</code>\u3002\u4f46\u8fd9\u6837\u5bbf\u4e3b\u673a\u7528\u6237\u5c31\u5f88\u96be\u67e5\u770b\u4e86\u3002</li> <li>User Remapping (\u9ad8\u7ea7): \u542f\u52a8\u5bb9\u5668\u65f6\u6307\u5b9a User\u3002     <pre><code>docker run -u $(id -u):$(id -g) -v $(pwd):/app node\n</code></pre><ul> <li>\u8fd9\u4f1a\u8ba9\u5bb9\u5668\u5185\u8fdb\u7a0b\u4ee5\u5bbf\u4e3b\u673a\u7528\u6237\u7684 UID \u8fd0\u884c\uff0c\u4ece\u800c\u62e5\u6709\u8bfb\u5199\u6743\u9650\u3002</li> </ul> </li> </ol>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#4-management","title":"4. \u5e38\u7528\u547d\u4ee4 (Management)","text":"<ul> <li><code>docker volume create &lt;name&gt;</code>: \u624b\u52a8\u5efa\u5377\u3002</li> <li><code>docker volume ls</code>: \u5217\u51fa\u6240\u6709\u5377\u3002</li> <li><code>docker volume inspect &lt;name&gt;</code>: \u67e5\u770b\u5377\u5728\u5bbf\u4e3b\u673a\u7684\u771f\u5b9e\u7269\u7406\u8def\u5f84\u3002</li> <li><code>docker volume prune</code>: \u5371\u9669\u64cd\u4f5c\u3002\u5220\u9664\u6240\u6709\u672a\u88ab\u4efb\u4f55\u5bb9\u5668\u4f7f\u7528\u7684\u5377\u3002</li> </ul>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#5-troubleshooting","title":"5. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"05_Architecture_Deep_Dive/07_Storage/#1-is-a-directory","title":"\u62a5\u9519 1: <code>Is a directory</code>","text":"<ul> <li>\u547d\u4ee4: <code>docker run -v /path/to/folder:/etc/nginx/nginx.conf ...</code></li> <li>\u539f\u56e0: \u8bd5\u56fe\u628a\u5bbf\u4e3b\u673a\u7684\u6587\u4ef6\u5939\u6302\u8f7d\u5230\u5bb9\u5668\u7684\u6587\u4ef6\u4e0a\u3002<ul> <li>\u5982\u679c\u5bbf\u4e3b\u673a\u8def\u5f84\u4e0d\u5b58\u5728\uff0cDocker \u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\u3002</li> </ul> </li> <li>\u89e3\u51b3: \u786e\u4fdd\u5bbf\u4e3b\u673a\u6587\u4ef6\u5b58\u5728\uff0c\u6216\u8005\u6302\u8f7d\u6574\u4e2a\u76ee\u5f55\u3002</li> </ul>"},{"location":"05_Architecture_Deep_Dive/07_Storage/#2","title":"\u8bef\u533a 2: \u591a\u4e2a\u5bb9\u5668\u5199\u540c\u4e00\u4e2a\u5377","text":"<ul> <li>\u73b0\u8c61: \u4e24\u4e2a MySQL \u5bb9\u5668\u6302\u8f7d\u540c\u4e00\u4e2a\u6570\u636e\u5377\u3002</li> <li>\u540e\u679c: \u6570\u636e\u635f\u574f\u3002\u6807\u51c6\u6587\u4ef6\u7cfb\u7edf\uff08ext4/xfs\uff09\u4e0d\u652f\u6301\u5e76\u53d1\u5199\u3002</li> <li>\u4f8b\u5916: \u9664\u975e\u662f\u53ea\u8bfb\u6302\u8f7d (<code>:ro</code>) \u6216\u5e94\u7528\u5c42\u652f\u6301\uff08\u5982\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff09\u3002</li> </ul> <p>Next: 08_Compose.md</p>"},{"location":"06_Orchestration/08_Compose/","title":"08. Docker Compose \u5b9e\u6218\u4e0e\u903b\u8f91 (Docker Compose)","text":""},{"location":"06_Orchestration/08_Compose/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p><code>docker run</code> \u9002\u5408\u7ba1\u7406\u5355\u4e2a\u5bb9\u5668\u3002\u4f46\u5728\u5fae\u670d\u52a1\u67b6\u6784\u4e2d\uff0c\u4e00\u4e2a\u5e94\u7528\u53ef\u80fd\u5305\u542b Web \u670d\u52a1\u3001\u6570\u636e\u5e93\u3001Redis \u7f13\u5b58\u3001\u6d88\u606f\u961f\u5217\u7b49\u591a\u4e2a\u5bb9\u5668\u3002 \u624b\u52a8\u6572 5 \u4e2a <code>docker run</code> \u547d\u4ee4\u4e0d\u4ec5\u7d2f\uff0c\u8fd8\u5bb9\u6613\u51fa\u9519\uff08\u5fd8\u8bb0\u7f51\u7edc\u8fde\u63a5\u3001\u73af\u5883\u53d8\u91cf\u5199\u9519\uff09\u3002</p>"},{"location":"06_Orchestration/08_Compose/#docker-compose","title":"Docker Compose","text":"<ul> <li>\u5b9a\u4e49: \u4e00\u4e2a\u7528\u4e8e\u5b9a\u4e49\u548c\u8fd0\u884c\u591a\u5bb9\u5668 Docker \u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u5177\u3002</li> <li>\u6838\u5fc3\u601d\u60f3: Infrastructure as Code (IaC)\u3002\u4f7f\u7528 YAML \u6587\u4ef6\u58f0\u660e\u5e94\u7528\u7684\u6700\u7ec8\u72b6\u6001\uff0c\u4e00\u952e\u542f\u52a8\u3002</li> </ul>"},{"location":"06_Orchestration/08_Compose/#2-yaml-syntax-breakdown","title":"2. YAML \u8bed\u6cd5\u663e\u5fae\u955c (Syntax Breakdown)","text":"<p>\u521b\u5efa\u4e00\u4e2a <code>docker-compose.yml</code> \u6587\u4ef6\u3002</p> <pre><code>version: '3.8'  # \u58f0\u660e\u8bed\u6cd5\u7248\u672c\n\nservices:       # \u5b9a\u4e49\u670d\u52a1\u96c6\u5408\n  web:          # \u670d\u52a1\u540d (\u4e5f\u662f DNS \u4e3b\u673a\u540d)\n    build: .    # \u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u7684 Dockerfile \u6784\u5efa\n    ports:\n      - \"8080:80\" # \u5bbf\u4e3b\u673a:\u5bb9\u5668\n    environment:\n      - NODE_ENV=production\n    depends_on: # \u4f9d\u8d56\u987a\u5e8f\n      - db\n      - redis\n    networks:\n      - backend\n\n  db:\n    image: postgres:14-alpine\n    volumes:\n      - db-data:/var/lib/postgresql/data # \u4f7f\u7528\u547d\u540d\u5377\n    environment:\n      POSTGRES_PASSWORD: secret\n    networks:\n      - backend\n\n  redis:\n    image: redis:alpine\n    networks:\n      - backend\n\nvolumes:        # \u58f0\u660e\u9876\u5c42\u8d44\u6e90\uff1a\u5377\n  db-data:      # \u81ea\u52a8\u521b\u5efa\u540d\u4e3a project_db-data \u7684\u5377\n\nnetworks:       # \u58f0\u660e\u9876\u5c42\u8d44\u6e90\uff1a\u7f51\u7edc\n  backend:      # \u81ea\u52a8\u521b\u5efa\u540d\u4e3a project_backend \u7684\u7f51\u7edc\n</code></pre>"},{"location":"06_Orchestration/08_Compose/#_1","title":"\u5173\u952e\u6307\u4ee4\u89e3\u6790","text":"<ul> <li><code>services</code>: \u6bcf\u4e00\u4e2a Key (\u5982 <code>web</code>, <code>db</code>) \u90fd\u662f\u4e00\u4e2a\u670d\u52a1\uff0c\u5bf9\u5e94\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u3002</li> <li><code>build</code> vs <code>image</code>:<ul> <li><code>build</code>: \u73b0\u573a\u6839\u636e Dockerfile \u6784\u5efa\u955c\u50cf\u3002</li> <li><code>image</code>: \u76f4\u63a5\u62c9\u53d6\u73b0\u6210\u955c\u50cf\u3002</li> </ul> </li> <li><code>depends_on</code>:<ul> <li>\u4f5c\u7528: \u63a7\u5236\u542f\u52a8\u987a\u5e8f\u3002\u4fdd\u8bc1 <code>db</code> \u548c <code>redis</code> \u5728 <code>web</code> \u4e4b\u524d\u542f\u52a8\u3002</li> <li>\u5c40\u9650\u6027: \u5b83\u53ea\u4fdd\u8bc1\u5bb9\u5668\u542f\u52a8\u4e86\uff0c\u4e0d\u4fdd\u8bc1\u5bb9\u5668\u5185\u7684\u6570\u636e\u5e93\u670d\u52a1\u5df2\u7ecf\u51c6\u5907\u597d\u63a5\u53d7\u8fde\u63a5\uff08Ready\uff09\u3002\u751f\u4ea7\u73af\u5883\u9700\u8981\u914d\u5408 <code>healthcheck</code>\u3002</li> </ul> </li> </ul>"},{"location":"06_Orchestration/08_Compose/#3-workflow","title":"3. \u5e38\u7528\u547d\u4ee4 (Workflow)","text":"<p>\u6ce8\u610f\uff1a\u65b0\u7248 Docker \u5df2\u96c6\u6210 Compose\uff0c\u547d\u4ee4\u662f <code>docker compose</code> (\u65e0\u8fde\u5b57\u7b26)\uff0c\u65e7\u7248\u662f <code>docker-compose</code>\u3002</p> <ul> <li><code>docker compose up -d</code>: \u6784\u5efa (\u5982\u679c\u9700\u8981) -&gt; \u521b\u5efa\u7f51\u7edc/\u5377 -&gt; \u542f\u52a8\u5bb9\u5668 (\u540e\u53f0\u6a21\u5f0f)\u3002</li> <li><code>docker compose down</code>: \u505c\u6b62\u5e76\u79fb\u9664\u5bb9\u5668\u3001\u7f51\u7edc\u3002\u4fdd\u7559\u5377\u6570\u636e\u3002</li> <li><code>docker compose down -v</code>: \u505c\u6b62\u5e76\u79fb\u9664\u4e00\u5207\uff0c\u5305\u62ec\u5377 (\u6570\u636e\u5168\u5220)\u3002</li> <li><code>docker compose logs -f</code>: \u67e5\u770b\u6240\u6709\u670d\u52a1\u7684\u805a\u5408\u65e5\u5fd7\u3002</li> <li><code>docker compose ps</code>: \u67e5\u770b\u5f53\u524d Compose \u9879\u76ee\u4e0b\u7684\u5bb9\u5668\u72b6\u6001\u3002</li> </ul>"},{"location":"06_Orchestration/08_Compose/#4-production-tips","title":"4. \u751f\u4ea7\u7ea7\u6280\u5de7 (Production Tips)","text":""},{"location":"06_Orchestration/08_Compose/#a-env","title":"A. \u73af\u5883\u53d8\u91cf\u6587\u4ef6 (.env)","text":"<p>\u4e0d\u8981\u628a\u5bc6\u7801\u76f4\u63a5\u5199\u5728 YAML \u91cc\u3002Docker Compose \u4f1a\u81ea\u52a8\u8bfb\u53d6\u540c\u7ea7\u76ee\u5f55\u4e0b\u7684 <code>.env</code> \u6587\u4ef6\u3002</p> <p><code>docker-compose.yml</code>: <pre><code>environment:\n  POSTGRES_PASSWORD: ${DB_PASSWORD}\n</code></pre></p> <p><code>.env</code>: <pre><code>DB_PASSWORD=SuperSecretPass123!\n</code></pre></p>"},{"location":"06_Orchestration/08_Compose/#b-override","title":"B. \u6269\u5c55\u4e0e\u8986\u76d6 (Override)","text":"<p>\u5f00\u53d1\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u4e0d\u540c\uff1f *   \u57fa\u7840\u914d\u7f6e: <code>docker-compose.yml</code> *   \u5f00\u53d1\u8986\u76d6: <code>docker-compose.override.yml</code> (\u9ed8\u8ba4\u81ea\u52a8\u52a0\u8f7d) *   \u751f\u4ea7\u8986\u76d6: <code>docker-compose.prod.yml</code></p> <p>\u8fd0\u884c\u751f\u4ea7\u73af\u5883: <pre><code>docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d\n</code></pre></p>"},{"location":"06_Orchestration/08_Compose/#5-troubleshooting","title":"5. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"06_Orchestration/08_Compose/#1-version-in-docker-composeyml-is-unsupported","title":"\u62a5\u9519 1: <code>Version in \"./docker-compose.yml\" is unsupported</code>","text":"<ul> <li>\u539f\u56e0: Docker Engine \u7248\u672c\u592a\u65e7\uff0c\u4e0d\u652f\u6301 YAML \u6587\u4ef6\u91cc\u58f0\u660e\u7684 <code>version: '3.8'</code>\u3002</li> <li>\u89e3\u51b3: \u5347\u7ea7 Docker\uff0c\u6216\u8005\u964d\u4f4e version \u53f7\u3002</li> </ul>"},{"location":"06_Orchestration/08_Compose/#2","title":"\u62a5\u9519 2: \u5bb9\u5668\u540d\u51b2\u7a81","text":"<ul> <li>\u539f\u56e0: Compose \u9ed8\u8ba4\u4f7f\u7528 <code>\u76ee\u5f55\u540d_\u670d\u52a1\u540d_\u5e8f\u53f7</code> \u4f5c\u4e3a\u5bb9\u5668\u540d\u3002\u5982\u679c\u4f60\u5728\u4e24\u4e2a\u4e0d\u540c\u76ee\u5f55\u4e0b\u6709\u540c\u6837\u7684 <code>docker-compose.yml</code> \u4e14\u76ee\u5f55\u540d\u76f8\u540c\uff0c\u4f1a\u51b2\u7a81\u3002</li> <li>\u89e3\u51b3: \u4f7f\u7528 <code>-p &lt;project_name&gt;</code> \u6307\u5b9a\u9879\u76ee\u540d\uff0c\u6216\u4fee\u6539\u76ee\u5f55\u540d\u3002</li> </ul> <p>Next: 09_Optimization.md</p>"},{"location":"07_Production_and_Debug/09_Optimization/","title":"09. \u955c\u50cf\u7626\u8eab\u4e0e\u5b89\u5168\u52a0\u56fa (Optimization &amp; Security)","text":""},{"location":"07_Production_and_Debug/09_Optimization/#1-concepts","title":"1. \u6838\u5fc3\u6982\u5ff5 (Concepts)","text":"<p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\"It works\" \u53ea\u662f\u8d77\u70b9\u3002\u4e00\u4e2a\u4f18\u79c0\u7684 Docker \u955c\u50cf\u5fc5\u987b\u5177\u5907\u4e24\u4e2a\u7279\u8d28\uff1aSmall (\u5c0f) \u548c Secure (\u5b89\u5168)\u3002</p> <ul> <li>\u5c0f: \u4f20\u8f93\u66f4\u5feb\uff0c\u90e8\u7f72\u66f4\u5feb\uff0c\u653b\u51fb\u9762\u66f4\u5c0f\u3002</li> <li>\u5b89\u5168: \u6700\u5c0f\u6743\u9650\u539f\u5219\uff0c\u9632\u6b62\u5bb9\u5668\u9003\u9038\u3002</li> </ul>"},{"location":"07_Production_and_Debug/09_Optimization/#2-slimming-strategy","title":"2. \u955c\u50cf\u7626\u8eab\u5de5\u7a0b (Slimming Strategy)","text":""},{"location":"07_Production_and_Debug/09_Optimization/#a-base-image-selection","title":"A. \u57fa\u7840\u955c\u50cf\u9009\u62e9 (Base Image Selection)","text":"\u955c\u50cf\u7c7b\u578b \u793a\u4f8b (<code>node</code>) \u5927\u5c0f (Approx) \u9002\u7528\u573a\u666f Full (Debian) <code>node:18</code> ~1 GB \u5f00\u53d1\u73af\u5883\uff0c\u9700\u8981\u5b8c\u6574\u5de5\u5177\u94fe Slim <code>node:18-slim</code> ~200 MB \u751f\u4ea7\u73af\u5883\uff0c\u5220\u9664\u4e86 man pages \u7b49 Alpine <code>node:18-alpine</code> ~50 MB \u63a8\u8350\u3002\u57fa\u4e8e musl libc\uff0c\u6781\u5c0f Distroless <code>gcr.io/distroless/nodejs</code> ~30 MB \u6781\u81f4\u3002\u4e0d\u5305\u542b Shell\uff0c\u65e0\u6cd5 exec \u8fdb\u53bb"},{"location":"07_Production_and_Debug/09_Optimization/#b-dockerignore","title":"B. .dockerignore (\u6784\u5efa\u4e0a\u4e0b\u6587\u4f18\u5316)","text":"<p>\u8fd9\u4e0d\u4ec5\u662f\u4e3a\u4e86\u7626\u8eab\uff0c\u66f4\u662f\u4e3a\u4e86\u5b89\u5168\u3002\u4e0d\u8981\u628a <code>.git</code> \u76ee\u5f55\u3001<code>node_modules</code>\u3001<code>.env</code> \u6587\u4ef6\u53d1\u9001\u7ed9 Docker Daemon\u3002</p> <p><code>.dockerignore</code> \u793a\u4f8b: <pre><code>.git\n.env\nnode_modules\nDockerfile\nREADME.md\ndocs/\ntest/\n</code></pre></p>"},{"location":"07_Production_and_Debug/09_Optimization/#c-layer-consolidation","title":"C. \u51cf\u5c11\u5c42\u6570 (Layer Consolidation)","text":"<p>\u5728 Docker \u65e7\u7248\u672c\u4e2d\uff0c\u5efa\u8bae\u5c06\u591a\u4e2a <code>RUN</code> \u5408\u5e76\u4e3a\u4e00\u884c\u3002\u4f46\u5728\u65b0\u7248\u672c\u4e2d\uff0c\u91cd\u70b9\u662f\u6e05\u7406\u7f13\u5b58\u3002</p> <p>Bad: <pre><code>RUN apt-get update\nRUN apt-get install -y vim\n</code></pre></p> <p>Good: <pre><code>RUN apt-get update &amp;&amp; apt-get install -y vim \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n</code></pre> *   \u539f\u7406: \u5fc5\u987b\u5728\u540c\u4e00\u5c42\u4e2d\u5b89\u88c5\u5e76\u6e05\u7406\u3002\u5982\u679c\u5728\u4e0b\u4e00\u5c42\u6e05\u7406\uff0c\u6587\u4ef6\u867d\u7136\u4e0d\u53ef\u89c1\uff0c\u4f46\u4ecd\u7136\u5b58\u5728\u4e8e\u5e95\u5c42\u955c\u50cf\u4e2d\uff08\u7c7b\u4f3c Git \u5386\u53f2\uff09\u3002</p>"},{"location":"07_Production_and_Debug/09_Optimization/#3-security-hardening","title":"3. \u5b89\u5168\u52a0\u56fa (Security Hardening)","text":""},{"location":"07_Production_and_Debug/09_Optimization/#a-root-non-root-user","title":"A. \u975e Root \u7528\u6237\u8fd0\u884c (Non-root User)","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u5185\u8fdb\u7a0b\u4ee5 root \u8fd0\u884c\u3002\u4e00\u65e6\u9003\u9038\uff0c\u653b\u51fb\u8005\u5c31\u62e5\u6709\u5bbf\u4e3b\u673a root \u6743\u9650\u3002</p> <p>Dockerfile: <pre><code># \u521b\u5efa\u7528\u6237\u548c\u7ec4 (Alpine \u8bed\u6cd5)\nRUN addgroup -S appgroup &amp;&amp; adduser -S appuser -G appgroup\n\n# \u5207\u6362\u7528\u6237\nUSER appuser\n\n# \u542f\u52a8\u5e94\u7528\nCMD [\"node\", \"app.js\"]\n</code></pre></p>"},{"location":"07_Production_and_Debug/09_Optimization/#b-drop-capabilities","title":"B. \u5265\u593a\u80fd\u529b (Drop Capabilities)","text":"<p>Linux Root \u62e5\u6709\u4e00\u7cfb\u5217\u201c\u80fd\u529b\u201d (Capabilities)\uff0c\u5982 <code>CAP_NET_ADMIN</code> (\u7ba1\u7406\u7f51\u7edc)\u3002\u5bb9\u5668\u5176\u5b9e\u4e0d\u9700\u8981\u8fd9\u4e48\u591a\u3002</p> <p>\u8fd0\u884c\u671f\u9650\u5236: <pre><code>docker run --cap-drop=ALL --cap-add=NET_BIND_SERVICE nginx\n</code></pre> *   <code>--cap-drop=ALL</code>: \u5148\u5265\u593a\u6240\u6709\u80fd\u529b\u3002 *   <code>--cap-add=...</code>: \u53ea\u6309\u9700\u8d4b\u4e88\u7279\u5b9a\u80fd\u529b\u3002</p>"},{"location":"07_Production_and_Debug/09_Optimization/#c-resource-quotas","title":"C. \u8d44\u6e90\u9650\u5236 (Resource Quotas)","text":"<p>\u9632\u6b62\u67d0\u4e2a\u5bb9\u5668\u5403\u5149\u5bbf\u4e3b\u673a CPU/\u5185\u5b58 (DoS \u653b\u51fb)\u3002</p> <p><pre><code>docker run --cpus=0.5 --memory=512m nginx\n</code></pre> *   <code>--cpus=0.5</code>: \u9650\u5236\u4f7f\u7528\u6700\u591a 50% \u7684\u5355\u6838 CPU \u65f6\u95f4\u3002 *   <code>--memory=512m</code>: \u5185\u5b58\u786c\u9650\u5236\u3002\u8d85\u8fc7\u5373 OOM Kill\u3002</p>"},{"location":"07_Production_and_Debug/09_Optimization/#4-troubleshooting","title":"4. \u907f\u5751\u6307\u5357 (Troubleshooting)","text":""},{"location":"07_Production_and_Debug/09_Optimization/#1-permission-denied-root","title":"\u62a5\u9519 1: <code>Permission denied</code> (\u5728\u975e Root \u5bb9\u5668\u4e2d)","text":"<ul> <li>\u573a\u666f: \u5207\u6362\u5230 <code>USER appuser</code> \u540e\uff0c\u5e94\u7528\u8bd5\u56fe\u5199\u65e5\u5fd7\u5230 <code>/var/log/app.log</code>\u3002</li> <li>\u539f\u56e0: <code>/var/log</code> \u5c5e\u4e8e root\u3002</li> <li>\u89e3\u51b3: \u5728\u5207\u6362 <code>USER</code> \u4e4b\u524d\uff0c\u5148\u521b\u5efa\u76ee\u5f55\u5e76\u79fb\u4ea4\u6743\u9650\u3002     <pre><code>RUN mkdir -p /var/log/app &amp;&amp; chown appuser:appgroup /var/log/app\nUSER appuser\n</code></pre></li> </ul>"},{"location":"07_Production_and_Debug/09_Optimization/#2-alpine-dns","title":"\u8bef\u533a 2: Alpine \u7684 DNS \u95ee\u9898","text":"<ul> <li>\u73b0\u8c61: Alpine \u4f7f\u7528 <code>musl libc</code>\uff0c\u5176 DNS \u89e3\u6790\u903b\u8f91\u4e0e\u6807\u51c6 <code>glibc</code> \u4e0d\u540c\u3002\u5728\u67d0\u4e9b\u65e7\u7248 Kubernetes \u6216\u7279\u5b9a\u7f51\u7edc\u73af\u5883\u4e0b\u53ef\u80fd\u89e3\u6790\u8d85\u65f6\u3002</li> <li>\u89e3\u51b3: \u5982\u679c\u9047\u5230\u8be1\u5f02\u7f51\u7edc\u95ee\u9898\uff0c\u5c1d\u8bd5\u6362\u56de <code>slim</code> (Debian) \u7248\u672c\u9a8c\u8bc1\u3002</li> </ul> <p>Next: 10_Troubleshooting.md</p>"},{"location":"07_Production_and_Debug/10_Troubleshooting/","title":"10. \u907f\u5751\u6307\u5357\u4e0e\u9519\u8bef\u5b57\u5178 (Troubleshooting Dictionary)","text":""},{"location":"07_Production_and_Debug/10_Troubleshooting/#1-methodology","title":"1. \u6838\u5fc3\u65b9\u6cd5\u8bba (Methodology)","text":"<p>\u9047\u5230 Docker \u62a5\u9519\u65f6\uff0c\u4e0d\u8981\u614c\u3002\u9075\u5faa \"L.I.S.T\" \u6d41\u7a0b\uff1a</p> <ol> <li>L (Logs): <code>docker logs &lt;container&gt;</code>\u3002\u770b\u5e94\u7528\u672c\u8eab\u5410\u51fa\u4e86\u4ec0\u4e48\u5806\u6808\u4fe1\u606f\u3002</li> <li>I (Inspect): <code>docker inspect &lt;container&gt;</code>\u3002\u770b\u72b6\u6001 (OOMKilled?)\u3001IP \u5730\u5740\u3001\u6302\u8f7d\u8def\u5f84\u3002</li> <li>S (Shell): <code>docker exec -it &lt;container&gt; sh</code>\u3002\u8fdb\u53bb\u770b\u770b\u6587\u4ef6\u5728\u4e0d\u5728\uff0c\u7f51\u7edc\u901a\u4e0d\u901a\u3002</li> <li>T (Test): \u53e6\u5916\u8d77\u4e00\u4e2a debug \u5bb9\u5668 (<code>docker run -it --net container:&lt;target&gt; nicolaka/netshoot</code>) \u8fdb\u884c\u7f51\u7edc\u6293\u5305\u6216\u6d4b\u8bd5\u3002</li> </ol>"},{"location":"07_Production_and_Debug/10_Troubleshooting/#2-common-errors","title":"2. \u5e38\u89c1\u62a5\u9519\u5b57\u5178 (Common Errors)","text":""},{"location":"07_Production_and_Debug/10_Troubleshooting/#a-startup-failures","title":"A. \u542f\u52a8\u7c7b (Startup Failures)","text":""},{"location":"07_Production_and_Debug/10_Troubleshooting/#exec-user-process-caused-no-such-file-or-directory","title":"<code>exec user process caused: no such file or directory</code>","text":"<ul> <li>\u4eba\u8bdd: \u627e\u4e0d\u5230\u542f\u52a8\u547d\u4ee4\u5bf9\u5e94\u7684\u6587\u4ef6\u3002</li> <li>\u5acc\u7591\u4eba:<ol> <li>Windows \u6362\u884c\u7b26 (<code>CRLF</code>) \u6c61\u67d3\u4e86 Shell \u811a\u672c\u3002</li> <li>\u4e8c\u8fdb\u5236\u6587\u4ef6\u662f\u52a8\u6001\u94fe\u63a5\u7684\uff0c\u4f46\u955c\u50cf\u91cc\u7f3a\u5c11\u5bf9\u5e94\u7684 <code>.so</code> \u5e93 (\u5e38\u53d1\u751f\u4e8e Go \u7a0b\u5e8f\u8dd1\u5728 Alpine \u4e0a)\u3002</li> </ol> </li> <li>\u5904\u65b9:<ol> <li><code>dos2unix entrypoint.sh</code>\u3002</li> <li>\u7f16\u8bd1 Go \u65f6\u52a0 <code>CGO_ENABLED=0</code>\u3002</li> </ol> </li> </ul>"},{"location":"07_Production_and_Debug/10_Troubleshooting/#bind-for-000080-failed-port-is-already-allocated","title":"<code>Bind for 0.0.0.0:80 failed: port is already allocated</code>","text":"<ul> <li>\u4eba\u8bdd: \u7aef\u53e3\u88ab\u5360\u4e86\u3002</li> <li>\u5904\u65b9: <code>sudo lsof -i :80</code> \u627e\u51fa\u8c01\u5728\u7528\uff0c\u6740\u6389\u5b83\uff0c\u6216\u8005\u6362\u4e2a\u7aef\u53e3\u6620\u5c04 (<code>-p 8080:80</code>)\u3002</li> </ul>"},{"location":"07_Production_and_Debug/10_Troubleshooting/#b-runtime-errors","title":"B. \u8fd0\u884c\u7c7b (Runtime Errors)","text":""},{"location":"07_Production_and_Debug/10_Troubleshooting/#oomkilled-exit-code-137","title":"<code>OOMKilled</code> (Exit Code 137)","text":"<ul> <li>\u4eba\u8bdd: \u5185\u5b58\u6ea2\u51fa\uff0c\u88ab\u5185\u6838\u6740\u4e86\u3002</li> <li>\u5acc\u7591\u4eba: Java \u5e94\u7528\u672a\u914d\u7f6e Heap \u9650\u5236\uff0c\u6216\u8005\u5e94\u7528\u6709\u5185\u5b58\u6cc4\u6f0f\u3002</li> <li>\u5904\u65b9:<ol> <li><code>docker stats</code> \u89c2\u5bdf\u5185\u5b58\u3002</li> <li>\u8c03\u6574\u5e94\u7528\u914d\u7f6e (\u5982 <code>-Xmx</code>)\u3002</li> <li>\u589e\u52a0\u5bb9\u5668\u5185\u5b58\u9650\u5236 (<code>--memory</code>)\u3002</li> </ol> </li> </ul>"},{"location":"07_Production_and_Debug/10_Troubleshooting/#connection-refused","title":"<code>Connection refused</code>","text":"<ul> <li>\u4eba\u8bdd: \u627e\u5230\u4e86\u4e3b\u673a\uff0c\u4f46\u7aef\u53e3\u6ca1\u5f00\u3002</li> <li>\u5acc\u7591\u4eba:<ol> <li>\u5e94\u7528\u6302\u4e86\u3002</li> <li>\u5e94\u7528\u53ea\u76d1\u542c\u4e86 <code>127.0.0.1</code> (Localhost)\uff0c\u6ca1\u76d1\u542c <code>0.0.0.0</code> (All Interfaces)\u3002</li> </ol> </li> <li>\u5904\u65b9: \u68c0\u67e5\u5e94\u7528\u914d\u7f6e\u6587\u4ef6\uff0c\u786e\u4fdd <code>bind_address</code> \u4e3a <code>0.0.0.0</code>\u3002</li> </ul>"},{"location":"07_Production_and_Debug/10_Troubleshooting/#no-space-left-on-device","title":"<code>No space left on device</code>","text":"<ul> <li>\u4eba\u8bdd: \u78c1\u76d8\u6ee1\u4e86\u3002</li> <li>\u5acc\u7591\u4eba:<ol> <li>Docker \u955c\u50cf/\u5bb9\u5668\u592a\u591a\u3002</li> <li>\u5bb9\u5668\u65e5\u5fd7 (<code>*-json.log</code>) \u7206\u4e86\u3002</li> </ol> </li> <li>\u5904\u65b9:<ol> <li><code>docker system prune -a</code> (\u6e05\u7406\u6240\u6709\u672a\u4f7f\u7528\u955c\u50cf)\u3002</li> <li>\u914d\u7f6e Docker Daemon \u7684\u65e5\u5fd7\u8f6e\u8f6c (log-rotation)\u3002</li> </ol> </li> </ul>"},{"location":"07_Production_and_Debug/10_Troubleshooting/#c-network-issues","title":"C. \u7f51\u7edc\u7c7b (Network Issues)","text":""},{"location":"07_Production_and_Debug/10_Troubleshooting/#temporary-failure-in-name-resolution","title":"<code>Temporary failure in name resolution</code>","text":"<ul> <li>\u4eba\u8bdd: DNS \u89e3\u6790\u5931\u8d25\u3002</li> <li>\u5904\u65b9:<ol> <li>\u68c0\u67e5\u5bb9\u5668\u5185 <code>/etc/resolv.conf</code>\u3002</li> <li>\u5c1d\u8bd5\u5f3a\u884c\u6307\u5b9a DNS: <code>docker run --dns 8.8.8.8 ...</code>\u3002</li> </ol> </li> </ul>"},{"location":"07_Production_and_Debug/10_Troubleshooting/#3-debug-tools","title":"3. \u8c03\u8bd5\u795e\u5668 (Debug Tools)","text":"<p>\u5728\u6781\u7b80\u7684\u955c\u50cf (Alpine/Distroless) \u4e2d\uff0c\u5f80\u5f80\u6ca1\u6709 <code>ping</code>, <code>curl</code>\u3002\u63a8\u8350\u4f7f\u7528\u4ee5\u4e0b\u745e\u58eb\u519b\u5200\u955c\u50cf\u8fdb\u884c\u6392\u9519\uff1a</p> <p><pre><code># \u9644\u7740\u5230\u76ee\u6807\u5bb9\u5668\u7684\u7f51\u7edc\u547d\u540d\u7a7a\u95f4\u4e2d\ndocker run -it --rm --net container:&lt;target_container_name&gt; nicolaka/netshoot\n</code></pre> *   <code>nicolaka/netshoot</code>: \u96c6\u6210\u4e86 tcpdump, curl, dig, iperf, mtr \u7b49\u51e0\u4e4e\u6240\u6709\u7f51\u7edc\u8c03\u8bd5\u5de5\u5177\u3002</p> <p>[End of Guide] \u606d\u559c\uff01\u4f60\u5df2\u7ecf\u638c\u63e1\u4e86\u4ece Docker \u539f\u7406\u5230\u751f\u4ea7\u6392\u9519\u7684\u5b8c\u6574\u77e5\u8bc6\u4f53\u7cfb\u3002 Go forth and containerize! \ud83d\udc33</p>"}]}